<शैली गुरु>
// SPDX-License-Identअगरier: GPL-2.0
/*
 * Copyright (c) 2019 Samsung Electronics Co., Ltd.
 *	      http://www.samsung.com/
 *
 * Samsung Exynos 5422 SoC Adaptive Supply Voltage support
 */

#समावेश <linux/bitrev.h>
#समावेश <linux/त्रुटिसं.स>
#समावेश <linux/regmap.h>
#समावेश <linux/soc/samsung/exynos-chipid.h>
#समावेश <linux/slab.h>

#समावेश "exynos-asv.h"
#समावेश "exynos5422-asv.h"

#घोषणा ASV_GROUPS_NUM		14
#घोषणा ASV_ARM_DVFS_NUM	20
#घोषणा ASV_ARM_BIN2_DVFS_NUM	17
#घोषणा ASV_KFC_DVFS_NUM	14
#घोषणा ASV_KFC_BIN2_DVFS_NUM	12

/*
 * This array is a set of 4 ASV data tables, first column of each ASV table
 * contains frequency value in MHz and subsequent columns contain the CPU
 * cluster's supply voltage values in uV.
 * In order to create a set of OPPs क्रम specअगरic SoC revision one of the voltage
 * columns (1...14) from one of the tables (0...3) is selected during
 * initialization. There are separate ASV tables क्रम the big (ARM) and little
 * (KFC) CPU cluster. Only OPPs which are alपढ़ोy defined in devicetree
 * will be updated.
 */

अटल स्थिर u32 asv_arm_table[][ASV_ARM_DVFS_NUM][ASV_GROUPS_NUM + 1] = अणु
अणु
	/* ARM 0, 1 */
	अणु 2100,    1362500, 1362500, 1350000, 1337500, 1325000, 1312500, 1300000,
	  1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000 पूर्ण,
	अणु 2000,    1312500, 1312500, 1300000, 1287500, 1275000, 1262500, 1250000,
	  1237500, 1225000, 1237500, 1225000, 1212500, 1200000, 1187500 पूर्ण,
	अणु 1900,    1250000, 1237500, 1225000, 1212500, 1200000, 1187500, 1175000,
	  1162500, 1150000, 1162500, 1150000, 1137500, 1125000, 1112500 पूर्ण,
	अणु 1800,    1200000, 1187500, 1175000, 1162500, 1150000, 1137500, 1125000,
	  1112500, 1100000, 1112500, 1100000, 1087500, 1075000, 1062500 पूर्ण,
	अणु 1700,    1162500, 1150000, 1137500, 1125000, 1112500, 1100000, 1087500,
	  1075000, 1062500, 1075000, 1062500, 1050000, 1037500, 1025000 पूर्ण,
	अणु 1600,    1125000, 1112500, 1100000, 1087500, 1075000, 1062500, 1050000,
	  1037500, 1025000, 1037500, 1025000, 1012500, 1000000, 987500 पूर्ण,
	अणु 1500,    1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500,
	  1000000, 987500,  1000000, 987500,  975000,  962500,  950000 पूर्ण,
	अणु 1400,    1062500, 1050000, 1037500, 1025000, 1012500, 1000000, 987500,
	  975000,  962500,  975000,  962500,  950000,  937500,  925000 पूर्ण,
	अणु 1300,    1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000,
	  962500,  950000,  962500,  950000,  937500,  925000,  912500 पूर्ण,
	अणु 1200,    1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  937500,  925000,  912500,  900000,  900000 पूर्ण,
	अणु 1100,    1000000, 987500,  975000,  962500,  950000,  937500,  925000,
	  912500,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 1000,    975000,  962500,  950000,  937500,  925000,  912500,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 900,     950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 800,     925000,  912500,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 700,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 600,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 500,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
पूर्ण, अणु
	/* ARM 2 */
	अणु 2100,    1362500, 1362500, 1350000, 1337500, 1325000, 1312500, 1300000,
	  1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000 पूर्ण,
	अणु 2000,    1312500, 1312500, 1312500, 1300000, 1275000, 1262500, 1250000,
	  1237500, 1225000, 1237500, 1225000, 1212500, 1200000, 1187500 पूर्ण,
	अणु 1900,    1262500, 1250000, 1250000, 1237500, 1212500, 1200000, 1187500,
	  1175000, 1162500, 1175000, 1162500, 1150000, 1137500, 1125000 पूर्ण,
	अणु 1800,    1212500, 1200000, 1187500, 1175000, 1162500, 1150000, 1137500,
	  1125000, 1112500, 1125000, 1112500, 1100000, 1087500, 1075000 पूर्ण,
	अणु 1700,    1175000, 1162500, 1150000, 1137500, 1125000, 1112500, 1100000,
	  1087500, 1075000, 1087500, 1075000, 1062500, 1050000, 1037500 पूर्ण,
	अणु 1600,    1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500,
	  1050000, 1037500, 1050000, 1037500, 1025000, 1012500, 1000000 पूर्ण,
	अणु 1500,    1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 1012500, 1000000, 987500,  975000,  962500 पूर्ण,
	अणु 1400,    1075000, 1062500, 1050000, 1037500, 1025000, 1012500, 1000000,
	  987500,  975000,  987500,  975000,  962500,  950000,  937500 पूर्ण,
	अणु 1300,    1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000,
	  962500,  950000,  962500,  950000,  937500,  925000,  912500 पूर्ण,
	अणु 1200,    1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  937500,  925000,  912500,  900000,  900000 पूर्ण,
	अणु 1100,    1000000, 987500,  975000,  962500,  950000,  937500,  925000,
	  912500,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 1000,    975000,  962500,  950000,  937500,  925000,  912500,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 900,     950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 800,     925000,  912500,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 700,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 600,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 500,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
पूर्ण, अणु
	/* ARM 3 */
	अणु 2100,    1362500, 1362500, 1350000, 1337500, 1325000, 1312500, 1300000,
	  1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000 पूर्ण,
	अणु 2000,    1312500, 1312500, 1300000, 1287500, 1275000, 1262500, 1250000,
	  1237500, 1225000, 1237500, 1225000, 1212500, 1200000, 1187500 पूर्ण,
	अणु 1900,    1262500, 1250000, 1237500, 1225000, 1212500, 1200000, 1187500,
	  1175000, 1162500, 1175000, 1162500, 1150000, 1137500, 1125000 पूर्ण,
	अणु 1800,    1212500, 1200000, 1187500, 1175000, 1162500, 1150000, 1137500,
	  1125000, 1112500, 1125000, 1112500, 1100000, 1087500, 1075000 पूर्ण,
	अणु 1700,    1175000, 1162500, 1150000, 1137500, 1125000, 1112500, 1100000,
	  1087500, 1075000, 1087500, 1075000, 1062500, 1050000, 1037500 पूर्ण,
	अणु 1600,    1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500,
	  1050000, 1037500, 1050000, 1037500, 1025000, 1012500, 1000000 पूर्ण,
	अणु 1500,    1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 1012500, 1000000, 987500,  975000,  962500 पूर्ण,
	अणु 1400,    1075000, 1062500, 1050000, 1037500, 1025000, 1012500, 1000000,
	  987500,  975000,  987500,  975000,  962500,  950000,  937500 पूर्ण,
	अणु 1300,    1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000,
	  962500,  950000,  962500,  950000,  937500,  925000,  912500 पूर्ण,
	अणु 1200,    1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  937500,  925000,  912500,  900000,  900000 पूर्ण,
	अणु 1100,    1000000, 987500,  975000,  962500,  950000,  937500,  925000,
	  912500,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 1000,    975000,  962500,  950000,  937500,  925000,  912500,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 900,     950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 800,     925000,  912500,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 700,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 600,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 500,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
पूर्ण, अणु
	/* ARM bin 2 */
	अणु 1800,    1237500, 1225000, 1212500, 1200000, 1187500, 1175000, 1162500,
	  1150000, 1137500, 1150000, 1137500, 1125000, 1112500, 1100000 पूर्ण,
	अणु 1700,    1200000, 1187500, 1175000, 1162500, 1150000, 1137500, 1125000,
	  1112500, 1100000, 1112500, 1100000, 1087500, 1075000, 1062500 पूर्ण,
	अणु 1600,    1162500, 1150000, 1137500, 1125000, 1112500, 1100000, 1087500,
	  1075000, 1062500, 1075000, 1062500, 1050000, 1037500, 1025000 पूर्ण,
	अणु 1500,    1125000, 1112500, 1100000, 1087500, 1075000, 1062500, 1050000,
	  1037500, 1025000, 1037500, 1025000, 1012500, 1000000, 987500 पूर्ण,
	अणु 1400,    1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 1012500, 1000000, 987500,  975000,  962500 पूर्ण,
	अणु 1300,    1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500,
	  1000000, 987500,  1000000, 987500,  975000,  962500,  950000 पूर्ण,
	अणु 1200,    1062500, 1050000, 1037500, 1025000, 1012500, 1000000, 987500,
	  975000,  962500,  975000,  962500,  950000,  937500,  925000 पूर्ण,
	अणु 1100,    1037500, 1025000, 1012500, 1000000, 987500,  975000,  962500,
	  950000,  937500,  950000,  937500,  925000,  912500,  900000 पूर्ण,
	अणु 1000,    1012500, 1000000, 987500,  975000,  962500,  950000,  937500,
	  925000,  912500,  925000,  912500,  900000,  900000,  900000 पूर्ण,
	अणु 900,     987500,  975000,  962500,  950000,  937500,  925000,  912500,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 800,     962500,  950000,  937500,  925000,  912500,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 700,     937500,  925000,  912500,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 600,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 500,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
पूर्ण
पूर्ण;

अटल स्थिर u32 asv_kfc_table[][ASV_KFC_DVFS_NUM][ASV_GROUPS_NUM + 1] = अणु
अणु
	/* KFC 0, 1 */
	अणु 1500000, 1300000, 1300000, 1300000, 1287500, 1287500, 1287500, 1275000,
	  1262500, 1250000, 1237500, 1225000, 1212500, 1200000, 1187500 पूर्ण,
	अणु 1400000, 1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000,
	  1187500, 1175000, 1162500, 1150000, 1137500, 1125000, 1112500 पूर्ण,
	अणु 1300000, 1225000, 1212500, 1200000, 1187500, 1175000, 1162500, 1150000,
	  1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500 पूर्ण,
	अणु 1200000, 1175000, 1162500, 1150000, 1137500, 1125000, 1112500, 1100000,
	  1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500 पूर्ण,
	अणु 1100000, 1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500,
	  1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000 पूर्ण,
	अणु 1000000, 1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 987500,  975000,  962500,  950000,  937500 पूर्ण,
	अणु 900000,  1062500, 1050000, 1037500, 1025000, 1012500, 1000000, 987500,
	  975000,  962500,  950000,  937500,  925000,  912500,  900000 पूर्ण,
	अणु 800000,  1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  912500,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 700000,  987500,  975000,  962500,  950000,  937500,  925000,  912500,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 600000,  950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 500000,  912500,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 400000,  900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 300000,  900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 200000,  900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
पूर्ण, अणु
	/* KFC 2 */
	अणु 1500,    1300000, 1300000, 1300000, 1287500, 1287500, 1287500, 1275000,
	  1262500, 1250000, 1237500, 1225000, 1212500, 1200000, 1187500 पूर्ण,
	अणु 1400,    1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000,
	  1187500, 1175000, 1162500, 1150000, 1137500, 1125000, 1112500 पूर्ण,
	अणु 1300,    1225000, 1212500, 1200000, 1187500, 1175000, 1162500, 1150000,
	  1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500 पूर्ण,
	अणु 1200,    1175000, 1162500, 1150000, 1137500, 1125000, 1112500, 1100000,
	  1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500 पूर्ण,
	अणु 1100,    1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500,
	  1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000 पूर्ण,
	अणु 1000,    1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 987500,  975000,  962500,  950000,  937500 पूर्ण,
	अणु 900,     1062500, 1050000, 1037500, 1025000, 1012500, 1000000, 987500,
	  975000,  962500,  950000,  937500,  925000,  912500,  900000 पूर्ण,
	अणु 800,     1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  912500,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 700,     987500,  975000,  962500,  950000,  937500,  925000,  912500,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 600,     950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 500,     912500,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
पूर्ण, अणु
	/* KFC 3 */
	अणु 1500,    1300000, 1300000, 1300000, 1287500, 1287500, 1287500, 1275000,
	  1262500, 1250000, 1237500, 1225000, 1212500, 1200000, 1187500 पूर्ण,
	अणु 1400,    1275000, 1262500, 1250000, 1237500, 1225000, 1212500, 1200000,
	  1187500, 1175000, 1162500, 1150000, 1137500, 1125000, 1112500 पूर्ण,
	अणु 1300,    1225000, 1212500, 1200000, 1187500, 1175000, 1162500, 1150000,
	  1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500 पूर्ण,
	अणु 1200,    1175000, 1162500, 1150000, 1137500, 1125000, 1112500, 1100000,
	  1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500 पूर्ण,
	अणु 1100,    1137500, 1125000, 1112500, 1100000, 1087500, 1075000, 1062500,
	  1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000 पूर्ण,
	अणु 1000,    1100000, 1087500, 1075000, 1062500, 1050000, 1037500, 1025000,
	  1012500, 1000000, 987500,  975000,  962500,  950000,  937500 पूर्ण,
	अणु 900,     1062500, 1050000, 1037500, 1025000, 1012500, 1000000, 987500,
	  975000,  962500,  950000,  937500,  925000,  912500,  900000 पूर्ण,
	अणु 800,     1025000, 1012500, 1000000, 987500,  975000,  962500,  950000,
	  937500,  925000,  912500,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 700,     987500,  975000,  962500,  950000,  937500,  925000,  912500,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 600,     950000,  937500,  925000,  912500,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 500,     912500,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 400,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
पूर्ण, अणु
	/* KFC bin 2 */
	अणु 1300,    1250000, 1237500, 1225000, 1212500, 1200000, 1187500, 1175000,
	  1162500, 1150000, 1137500, 1125000, 1112500, 1100000, 1087500 पूर्ण,
	अणु 1200,    1200000, 1187500, 1175000, 1162500, 1150000, 1137500, 1125000,
	  1112500, 1100000, 1087500, 1075000, 1062500, 1050000, 1037500 पूर्ण,
	अणु 1100,    1162500, 1150000, 1137500, 1125000, 1112500, 1100000, 1087500,
	  1075000, 1062500, 1050000, 1037500, 1025000, 1012500, 1000000 पूर्ण,
	अणु 1000,    1125000, 1112500, 1100000, 1087500, 1075000, 1062500, 1050000,
	  1037500, 1025000, 1012500, 1000000, 987500,  975000,  962500 पूर्ण,
	अणु 900,     1087500, 1075000, 1062500, 1050000, 1037500, 1025000, 1012500,
	  1000000, 987500,  975000,  962500,  950000,  937500,  925000 पूर्ण,
	अणु 800,     1050000, 1037500, 1025000, 1012500, 1000000, 987500,  975000,
	  962500,  950000,  937500,  925000,  912500,  900000,  900000 पूर्ण,
	अणु 700,     1012500, 1000000, 987500,  975000,  962500,  950000,  937500,
	  925000,  912500,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 600,     975000,  962500,  950000,  937500,  925000,  912500,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 500,     937500,  925000,  912500,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 400,     925000,  912500,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 300,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
	अणु 200,     900000,  900000,  900000,  900000,  900000,  900000,  900000,
	  900000,  900000,  900000,  900000,  900000,  900000,  900000 पूर्ण,
पूर्ण
पूर्ण;

अटल स्थिर काष्ठा asv_limit_entry __asv_limits[ASV_GROUPS_NUM] = अणु
	अणु 13, 55 पूर्ण,
	अणु 21, 65 पूर्ण,
	अणु 25, 69 पूर्ण,
	अणु 30, 72 पूर्ण,
	अणु 36, 74 पूर्ण,
	अणु 43, 76 पूर्ण,
	अणु 51, 78 पूर्ण,
	अणु 65, 80 पूर्ण,
	अणु 81, 82 पूर्ण,
	अणु 98, 84 पूर्ण,
	अणु 119, 87 पूर्ण,
	अणु 135, 89 पूर्ण,
	अणु 150, 92 पूर्ण,
	अणु 999, 999 पूर्ण,
पूर्ण;

अटल पूर्णांक exynos5422_asv_get_group(काष्ठा exynos_asv *asv)
अणु
	अचिन्हित पूर्णांक pkgid_reg, auxi_reg;
	पूर्णांक hpm, ids, i;

	regmap_पढ़ो(asv->chipid_regmap, EXYNOS_CHIPID_REG_PKG_ID, &pkgid_reg);
	regmap_पढ़ो(asv->chipid_regmap, EXYNOS_CHIPID_REG_AUX_INFO, &auxi_reg);

	अगर (asv->use_sg) अणु
		u32 sga = (pkgid_reg >> EXYNOS5422_SG_A_OFFSET) &
			   EXYNOS5422_SG_A_MASK;

		u32 sgb = (pkgid_reg >> EXYNOS5422_SG_B_OFFSET) &
			   EXYNOS5422_SG_B_MASK;

		अगर ((pkgid_reg >> EXYNOS5422_SG_BSIGN_OFFSET) &
		     EXYNOS5422_SG_BSIGN_MASK)
			वापस sga + sgb;
		अन्यथा
			वापस sga - sgb;
	पूर्ण

	hpm = (auxi_reg >> EXYNOS5422_TMCB_OFFSET) & EXYNOS5422_TMCB_MASK;
	ids = (pkgid_reg >> EXYNOS5422_IDS_OFFSET) & EXYNOS5422_IDS_MASK;

	क्रम (i = 0; i < ASV_GROUPS_NUM; i++) अणु
		अगर (ids <= __asv_limits[i].ids)
			अवरोध;
		अगर (hpm <= __asv_limits[i].hpm)
			अवरोध;
	पूर्ण
	अगर (i < ASV_GROUPS_NUM)
		वापस i;

	वापस 0;
पूर्ण

अटल पूर्णांक __asv_offset_voltage(अचिन्हित पूर्णांक index)
अणु
	चयन (index) अणु
	हाल 1:
		वापस 12500;
	हाल 2:
		वापस 50000;
	हाल 3:
		वापस 25000;
	शेष:
		वापस 0;
	पूर्ण
पूर्ण

अटल व्योम exynos5422_asv_offset_voltage_setup(काष्ठा exynos_asv *asv)
अणु
	काष्ठा exynos_asv_subsys *subsys;
	अचिन्हित पूर्णांक reg, value;

	regmap_पढ़ो(asv->chipid_regmap, EXYNOS_CHIPID_REG_AUX_INFO, &reg);

	/* ARM offset voltage setup */
	subsys = &asv->subsys[EXYNOS_ASV_SUBSYS_ID_ARM];

	subsys->base_volt = 1000000;

	value = (reg >> EXYNOS5422_ARM_UP_OFFSET) & EXYNOS5422_ARM_UP_MASK;
	subsys->offset_volt_h = __asv_offset_voltage(value);

	value = (reg >> EXYNOS5422_ARM_DN_OFFSET) & EXYNOS5422_ARM_DN_MASK;
	subsys->offset_volt_l = __asv_offset_voltage(value);

	/* KFC offset voltage setup */
	subsys = &asv->subsys[EXYNOS_ASV_SUBSYS_ID_KFC];

	subsys->base_volt = 1000000;

	value = (reg >> EXYNOS5422_KFC_UP_OFFSET) & EXYNOS5422_KFC_UP_MASK;
	subsys->offset_volt_h = __asv_offset_voltage(value);

	value = (reg >> EXYNOS5422_KFC_DN_OFFSET) & EXYNOS5422_KFC_DN_MASK;
	subsys->offset_volt_l = __asv_offset_voltage(value);
पूर्ण

अटल पूर्णांक exynos5422_asv_opp_get_voltage(स्थिर काष्ठा exynos_asv_subsys *subsys,
					  पूर्णांक level, अचिन्हित पूर्णांक volt)
अणु
	अचिन्हित पूर्णांक asv_volt;

	अगर (level >= subsys->table.num_rows)
		वापस volt;

	asv_volt = exynos_asv_opp_get_voltage(subsys, level,
					      subsys->asv->group);

	अगर (volt > subsys->base_volt)
		asv_volt += subsys->offset_volt_h;
	अन्यथा
		asv_volt += subsys->offset_volt_l;

	वापस asv_volt;
पूर्ण

अटल अचिन्हित पूर्णांक exynos5422_asv_parse_table(अचिन्हित पूर्णांक pkg_id)
अणु
	वापस (pkg_id >> EXYNOS5422_TABLE_OFFSET) & EXYNOS5422_TABLE_MASK;
पूर्ण

अटल bool exynos5422_asv_parse_bin2(अचिन्हित पूर्णांक pkg_id)
अणु
	वापस (pkg_id >> EXYNOS5422_BIN2_OFFSET) & EXYNOS5422_BIN2_MASK;
पूर्ण

अटल bool exynos5422_asv_parse_sg(अचिन्हित पूर्णांक pkg_id)
अणु
	वापस (pkg_id >> EXYNOS5422_USESG_OFFSET) & EXYNOS5422_USESG_MASK;
पूर्ण

पूर्णांक exynos5422_asv_init(काष्ठा exynos_asv *asv)
अणु
	काष्ठा exynos_asv_subsys *subsys;
	अचिन्हित पूर्णांक table_index;
	अचिन्हित पूर्णांक pkg_id;
	bool bin2;

	regmap_पढ़ो(asv->chipid_regmap, EXYNOS_CHIPID_REG_PKG_ID, &pkg_id);

	अगर (asv->of_bin == 2) अणु
		bin2 = true;
		asv->use_sg = false;
	पूर्ण अन्यथा अणु
		asv->use_sg = exynos5422_asv_parse_sg(pkg_id);
		bin2 = exynos5422_asv_parse_bin2(pkg_id);
	पूर्ण

	asv->group = exynos5422_asv_get_group(asv);
	asv->table = exynos5422_asv_parse_table(pkg_id);

	exynos5422_asv_offset_voltage_setup(asv);

	अगर (bin2) अणु
		table_index = 3;
	पूर्ण अन्यथा अणु
		अगर (asv->table == 2 || asv->table == 3)
			table_index = asv->table - 1;
		अन्यथा
			table_index = 0;
	पूर्ण

	subsys = &asv->subsys[EXYNOS_ASV_SUBSYS_ID_ARM];
	subsys->cpu_dt_compat = "arm,cortex-a15";
	अगर (bin2)
		subsys->table.num_rows = ASV_ARM_BIN2_DVFS_NUM;
	अन्यथा
		subsys->table.num_rows = ASV_ARM_DVFS_NUM;
	subsys->table.num_cols = ASV_GROUPS_NUM + 1;
	subsys->table.buf = (u32 *)asv_arm_table[table_index];

	subsys = &asv->subsys[EXYNOS_ASV_SUBSYS_ID_KFC];
	subsys->cpu_dt_compat = "arm,cortex-a7";
	अगर (bin2)
		subsys->table.num_rows = ASV_KFC_BIN2_DVFS_NUM;
	अन्यथा
		subsys->table.num_rows = ASV_KFC_DVFS_NUM;
	subsys->table.num_cols = ASV_GROUPS_NUM + 1;
	subsys->table.buf = (u32 *)asv_kfc_table[table_index];

	asv->opp_get_voltage = exynos5422_asv_opp_get_voltage;

	वापस 0;
पूर्ण
