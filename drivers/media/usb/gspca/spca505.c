<शैली गुरु>
// SPDX-License-Identअगरier: GPL-2.0-or-later
/*
 * SPCA505 chip based cameras initialization data
 *
 * V4L2 by Jean-Francis Moine <http://moinejf.मुक्त.fr>
 */

#घोषणा pr_fmt(fmt) KBUILD_MODNAME ": " fmt

#घोषणा MODULE_NAME "spca505"

#समावेश "gspca.h"

MODULE_AUTHOR("Michel Xhaard <mxhaard@users.sourceforge.net>");
MODULE_DESCRIPTION("GSPCA/SPCA505 USB Camera Driver");
MODULE_LICENSE("GPL");

/* specअगरic webcam descriptor */
काष्ठा sd अणु
	काष्ठा gspca_dev gspca_dev;		/* !! must be the first item */

	u8 subtype;
#घोषणा IntelPCCameraPro 0
#घोषणा Nxultra 1
पूर्ण;

अटल स्थिर काष्ठा v4l2_pix_क्रमmat vga_mode[] = अणु
	अणु160, 120, V4L2_PIX_FMT_SPCA505, V4L2_FIELD_NONE,
		.bytesperline = 160,
		.sizeimage = 160 * 120 * 3 / 2,
		.colorspace = V4L2_COLORSPACE_SRGB,
		.priv = 4पूर्ण,
	अणु176, 144, V4L2_PIX_FMT_SPCA505, V4L2_FIELD_NONE,
		.bytesperline = 176,
		.sizeimage = 176 * 144 * 3 / 2,
		.colorspace = V4L2_COLORSPACE_SRGB,
		.priv = 3पूर्ण,
	अणु320, 240, V4L2_PIX_FMT_SPCA505, V4L2_FIELD_NONE,
		.bytesperline = 320,
		.sizeimage = 320 * 240 * 3 / 2,
		.colorspace = V4L2_COLORSPACE_SRGB,
		.priv = 2पूर्ण,
	अणु352, 288, V4L2_PIX_FMT_SPCA505, V4L2_FIELD_NONE,
		.bytesperline = 352,
		.sizeimage = 352 * 288 * 3 / 2,
		.colorspace = V4L2_COLORSPACE_SRGB,
		.priv = 1पूर्ण,
	अणु640, 480, V4L2_PIX_FMT_SPCA505, V4L2_FIELD_NONE,
		.bytesperline = 640,
		.sizeimage = 640 * 480 * 3 / 2,
		.colorspace = V4L2_COLORSPACE_SRGB,
		.priv = 0पूर्ण,
पूर्ण;

#घोषणा SPCA50X_OFFSET_DATA 10

#घोषणा SPCA50X_REG_USB 0x02	/* spca505 501 */

#घोषणा SPCA50X_USB_CTRL 0x00	/* spca505 */
#घोषणा SPCA50X_CUSB_ENABLE 0x01 /* spca505 */

#घोषणा SPCA50X_REG_GLOBAL 0x03	/* spca505 */
#घोषणा SPCA50X_GMISC0_IDSEL 0x01 /* Global control device ID select spca505 */
#घोषणा SPCA50X_GLOBAL_MISC0 0x00 /* Global control miscellaneous 0 spca505 */

#घोषणा SPCA50X_GLOBAL_MISC1 0x01 /* 505 */
#घोषणा SPCA50X_GLOBAL_MISC3 0x03 /* 505 */
#घोषणा SPCA50X_GMISC3_SAA7113RST 0x20	/* Not sure about this one spca505 */

/* Image क्रमmat and compression control */
#घोषणा SPCA50X_REG_COMPRESS 0x04

/*
 * Data to initialize a SPCA505. Common to the CCD and बाह्यal modes
 */
अटल स्थिर u8 spca505_init_data[][3] = अणु
	/* bmRequest,value,index */
	अणुSPCA50X_REG_GLOBAL, SPCA50X_GMISC3_SAA7113RST, SPCA50X_GLOBAL_MISC3पूर्ण,
	/* Sensor reset */
	अणुSPCA50X_REG_GLOBAL, 0x00, SPCA50X_GLOBAL_MISC3पूर्ण,
	अणुSPCA50X_REG_GLOBAL, 0x00, SPCA50X_GLOBAL_MISC1पूर्ण,
	/* Block USB reset */
	अणुSPCA50X_REG_GLOBAL, SPCA50X_GMISC0_IDSEL, SPCA50X_GLOBAL_MISC0पूर्ण,

	अणु0x05, 0x01, 0x10पूर्ण,
					/* Maybe घातer करोwn some stuff */
	अणु0x05, 0x0f, 0x11पूर्ण,

	/* Setup पूर्णांकernal CCD  ? */
	अणु0x06, 0x10, 0x08पूर्ण,
	अणु0x06, 0x00, 0x09पूर्ण,
	अणु0x06, 0x00, 0x0aपूर्ण,
	अणु0x06, 0x00, 0x0bपूर्ण,
	अणु0x06, 0x10, 0x0cपूर्ण,
	अणु0x06, 0x00, 0x0dपूर्ण,
	अणु0x06, 0x00, 0x0eपूर्ण,
	अणु0x06, 0x00, 0x0fपूर्ण,
	अणु0x06, 0x10, 0x10पूर्ण,
	अणु0x06, 0x02, 0x11पूर्ण,
	अणु0x06, 0x00, 0x12पूर्ण,
	अणु0x06, 0x04, 0x13पूर्ण,
	अणु0x06, 0x02, 0x14पूर्ण,
	अणु0x06, 0x8a, 0x51पूर्ण,
	अणु0x06, 0x40, 0x52पूर्ण,
	अणु0x06, 0xb6, 0x53पूर्ण,
	अणु0x06, 0x3d, 0x54पूर्ण,
	अणुपूर्ण
पूर्ण;

/*
 * Data to initialize the camera using the पूर्णांकernal CCD
 */
अटल स्थिर u8 spca505_खोलो_data_ccd[][3] = अणु
	/* bmRequest,value,index */
	/* Internal CCD data set */
	अणु0x03, 0x04, 0x01पूर्ण,
	/* This could be a reset */
	अणु0x03, 0x00, 0x01पूर्ण,

	/* Setup compression and image रेजिस्टरs. 0x6 and 0x7 seem to be
	   related to H&V hold, and are resolution mode specअगरic */
		अणु0x04, 0x10, 0x01पूर्ण,
		/* DIFF(0x50), was (0x10) */
	अणु0x04, 0x00, 0x04पूर्ण,
	अणु0x04, 0x00, 0x05पूर्ण,
	अणु0x04, 0x20, 0x06पूर्ण,
	अणु0x04, 0x20, 0x07पूर्ण,

	अणु0x08, 0x0a, 0x00पूर्ण,
	/* DIFF (0x4a), was (0xa) */

	अणु0x05, 0x00, 0x10पूर्ण,
	अणु0x05, 0x00, 0x11पूर्ण,
	अणु0x05, 0x00, 0x00पूर्ण,
	/* DIFF not written */
	अणु0x05, 0x00, 0x01पूर्ण,
	/* DIFF not written */
	अणु0x05, 0x00, 0x02पूर्ण,
	/* DIFF not written */
	अणु0x05, 0x00, 0x03पूर्ण,
	/* DIFF not written */
	अणु0x05, 0x00, 0x04पूर्ण,
	/* DIFF not written */
		अणु0x05, 0x80, 0x05पूर्ण,
		/* DIFF not written */
		अणु0x05, 0xe0, 0x06पूर्ण,
		/* DIFF not written */
		अणु0x05, 0x20, 0x07पूर्ण,
		/* DIFF not written */
		अणु0x05, 0xa0, 0x08पूर्ण,
		/* DIFF not written */
		अणु0x05, 0x0, 0x12पूर्ण,
		/* DIFF not written */
	अणु0x05, 0x02, 0x0fपूर्ण,
	/* DIFF not written */
		अणु0x05, 0x10, 0x46पूर्ण,
		/* DIFF not written */
		अणु0x05, 0x8, 0x4aपूर्ण,
		/* DIFF not written */

	अणु0x03, 0x08, 0x03पूर्ण,
	/* DIFF (0x3,0x28,0x3) */
	अणु0x03, 0x08, 0x01पूर्ण,
	अणु0x03, 0x0c, 0x03पूर्ण,
	/* DIFF not written */
		अणु0x03, 0x21, 0x00पूर्ण,
		/* DIFF (0x39) */

/* Extra block copied from init to hopefully ensure CCD is in a sane state */
	अणु0x06, 0x10, 0x08पूर्ण,
	अणु0x06, 0x00, 0x09पूर्ण,
	अणु0x06, 0x00, 0x0aपूर्ण,
	अणु0x06, 0x00, 0x0bपूर्ण,
	अणु0x06, 0x10, 0x0cपूर्ण,
	अणु0x06, 0x00, 0x0dपूर्ण,
	अणु0x06, 0x00, 0x0eपूर्ण,
	अणु0x06, 0x00, 0x0fपूर्ण,
	अणु0x06, 0x10, 0x10पूर्ण,
	अणु0x06, 0x02, 0x11पूर्ण,
	अणु0x06, 0x00, 0x12पूर्ण,
	अणु0x06, 0x04, 0x13पूर्ण,
	अणु0x06, 0x02, 0x14पूर्ण,
	अणु0x06, 0x8a, 0x51पूर्ण,
	अणु0x06, 0x40, 0x52पूर्ण,
	अणु0x06, 0xb6, 0x53पूर्ण,
	अणु0x06, 0x3d, 0x54पूर्ण,
	/* End of extra block */

		अणु0x06, 0x3f, 0x1पूर्ण,
		/* Block skipped */
	अणु0x06, 0x10, 0x02पूर्ण,
	अणु0x06, 0x64, 0x07पूर्ण,
	अणु0x06, 0x10, 0x08पूर्ण,
	अणु0x06, 0x00, 0x09पूर्ण,
	अणु0x06, 0x00, 0x0aपूर्ण,
	अणु0x06, 0x00, 0x0bपूर्ण,
	अणु0x06, 0x10, 0x0cपूर्ण,
	अणु0x06, 0x00, 0x0dपूर्ण,
	अणु0x06, 0x00, 0x0eपूर्ण,
	अणु0x06, 0x00, 0x0fपूर्ण,
	अणु0x06, 0x10, 0x10पूर्ण,
	अणु0x06, 0x02, 0x11पूर्ण,
	अणु0x06, 0x00, 0x12पूर्ण,
	अणु0x06, 0x04, 0x13पूर्ण,
	अणु0x06, 0x02, 0x14पूर्ण,
	अणु0x06, 0x8a, 0x51पूर्ण,
	अणु0x06, 0x40, 0x52पूर्ण,
	अणु0x06, 0xb6, 0x53पूर्ण,
	अणु0x06, 0x3d, 0x54पूर्ण,
	अणु0x06, 0x60, 0x57पूर्ण,
	अणु0x06, 0x20, 0x58पूर्ण,
	अणु0x06, 0x15, 0x59पूर्ण,
	अणु0x06, 0x05, 0x5aपूर्ण,

	अणु0x05, 0x01, 0xc0पूर्ण,
	अणु0x05, 0x10, 0xcbपूर्ण,
		अणु0x05, 0x80, 0xc1पूर्ण,
		/* */
		अणु0x05, 0x0, 0xc2पूर्ण,
		/* 4 was 0 */
	अणु0x05, 0x00, 0xcaपूर्ण,
		अणु0x05, 0x80, 0xc1पूर्ण,
		/*  */
	अणु0x05, 0x04, 0xc2पूर्ण,
	अणु0x05, 0x00, 0xcaपूर्ण,
		अणु0x05, 0x0, 0xc1पूर्ण,
		/*  */
	अणु0x05, 0x00, 0xc2पूर्ण,
	अणु0x05, 0x00, 0xcaपूर्ण,
		अणु0x05, 0x40, 0xc1पूर्ण,
		/* */
	अणु0x05, 0x17, 0xc2पूर्ण,
	अणु0x05, 0x00, 0xcaपूर्ण,
		अणु0x05, 0x80, 0xc1पूर्ण,
		/* */
	अणु0x05, 0x06, 0xc2पूर्ण,
	अणु0x05, 0x00, 0xcaपूर्ण,
		अणु0x05, 0x80, 0xc1पूर्ण,
		/* */
	अणु0x05, 0x04, 0xc2पूर्ण,
	अणु0x05, 0x00, 0xcaपूर्ण,

	अणु0x03, 0x4c, 0x3पूर्ण,
	अणु0x03, 0x18, 0x1पूर्ण,

	अणु0x06, 0x70, 0x51पूर्ण,
	अणु0x06, 0xbe, 0x53पूर्ण,
	अणु0x06, 0x71, 0x57पूर्ण,
	अणु0x06, 0x20, 0x58पूर्ण,
	अणु0x06, 0x05, 0x59पूर्ण,
	अणु0x06, 0x15, 0x5aपूर्ण,

	अणु0x04, 0x00, 0x08पूर्ण,
	/* Compress = OFF (0x1 to turn on) */
	अणु0x04, 0x12, 0x09पूर्ण,
	अणु0x04, 0x21, 0x0aपूर्ण,
	अणु0x04, 0x10, 0x0bपूर्ण,
	अणु0x04, 0x21, 0x0cपूर्ण,
	अणु0x04, 0x05, 0x00पूर्ण,
	/* was 5 (Image Type ? ) */
	अणु0x04, 0x00, 0x01पूर्ण,

	अणु0x06, 0x3f, 0x01पूर्ण,

	अणु0x04, 0x00, 0x04पूर्ण,
	अणु0x04, 0x00, 0x05पूर्ण,
	अणु0x04, 0x40, 0x06पूर्ण,
	अणु0x04, 0x40, 0x07पूर्ण,

	अणु0x06, 0x1c, 0x17पूर्ण,
	अणु0x06, 0xe2, 0x19पूर्ण,
	अणु0x06, 0x1c, 0x1bपूर्ण,
	अणु0x06, 0xe2, 0x1dपूर्ण,
	अणु0x06, 0xaa, 0x1fपूर्ण,
	अणु0x06, 0x70, 0x20पूर्ण,

	अणु0x05, 0x01, 0x10पूर्ण,
	अणु0x05, 0x00, 0x11पूर्ण,
	अणु0x05, 0x01, 0x00पूर्ण,
	अणु0x05, 0x05, 0x01पूर्ण,
		अणु0x05, 0x00, 0xc1पूर्ण,
		/* */
	अणु0x05, 0x00, 0xc2पूर्ण,
	अणु0x05, 0x00, 0xcaपूर्ण,

	अणु0x06, 0x70, 0x51पूर्ण,
	अणु0x06, 0xbe, 0x53पूर्ण,
	अणुपूर्ण
पूर्ण;

/*
 * Made by Tomasz Zablocki (skalamandra@poczta.onet.pl)
 * SPCA505b chip based cameras initialization data
 */
/* jfm */
#घोषणा initial_brightness 0x7f	/* 0x0(white)-0xff(black) */
/* #घोषणा initial_brightness 0x0	//0x0(white)-0xff(black) */
/*
 * Data to initialize a SPCA505. Common to the CCD and बाह्यal modes
 */
अटल स्थिर u8 spca505b_init_data[][3] = अणु
/* start */
	अणु0x02, 0x00, 0x00पूर्ण,		/* init */
	अणु0x02, 0x00, 0x01पूर्ण,
	अणु0x02, 0x00, 0x02पूर्ण,
	अणु0x02, 0x00, 0x03पूर्ण,
	अणु0x02, 0x00, 0x04पूर्ण,
	अणु0x02, 0x00, 0x05पूर्ण,
	अणु0x02, 0x00, 0x06पूर्ण,
	अणु0x02, 0x00, 0x07पूर्ण,
	अणु0x02, 0x00, 0x08पूर्ण,
	अणु0x02, 0x00, 0x09पूर्ण,
	अणु0x03, 0x00, 0x00पूर्ण,
	अणु0x03, 0x00, 0x01पूर्ण,
	अणु0x03, 0x00, 0x02पूर्ण,
	अणु0x03, 0x00, 0x03पूर्ण,
	अणु0x03, 0x00, 0x04पूर्ण,
	अणु0x03, 0x00, 0x05पूर्ण,
	अणु0x03, 0x00, 0x06पूर्ण,
	अणु0x04, 0x00, 0x00पूर्ण,
	अणु0x04, 0x00, 0x02पूर्ण,
	अणु0x04, 0x00, 0x04पूर्ण,
	अणु0x04, 0x00, 0x05पूर्ण,
	अणु0x04, 0x00, 0x06पूर्ण,
	अणु0x04, 0x00, 0x07पूर्ण,
	अणु0x04, 0x00, 0x08पूर्ण,
	अणु0x04, 0x00, 0x09पूर्ण,
	अणु0x04, 0x00, 0x0aपूर्ण,
	अणु0x04, 0x00, 0x0bपूर्ण,
	अणु0x04, 0x00, 0x0cपूर्ण,
	अणु0x07, 0x00, 0x00पूर्ण,
	अणु0x07, 0x00, 0x03पूर्ण,
	अणु0x08, 0x00, 0x00पूर्ण,
	अणु0x08, 0x00, 0x01पूर्ण,
	अणु0x08, 0x00, 0x02पूर्ण,
	अणु0x06, 0x18, 0x08पूर्ण,
	अणु0x06, 0xfc, 0x09पूर्ण,
	अणु0x06, 0xfc, 0x0aपूर्ण,
	अणु0x06, 0xfc, 0x0bपूर्ण,
	अणु0x06, 0x18, 0x0cपूर्ण,
	अणु0x06, 0xfc, 0x0dपूर्ण,
	अणु0x06, 0xfc, 0x0eपूर्ण,
	अणु0x06, 0xfc, 0x0fपूर्ण,
	अणु0x06, 0x18, 0x10पूर्ण,
	अणु0x06, 0xfe, 0x12पूर्ण,
	अणु0x06, 0x00, 0x11पूर्ण,
	अणु0x06, 0x00, 0x14पूर्ण,
	अणु0x06, 0x00, 0x13पूर्ण,
	अणु0x06, 0x28, 0x51पूर्ण,
	अणु0x06, 0xff, 0x53पूर्ण,
	अणु0x02, 0x00, 0x08पूर्ण,

	अणु0x03, 0x00, 0x03पूर्ण,
	अणु0x03, 0x10, 0x03पूर्ण,
	अणुपूर्ण
पूर्ण;

/*
 * Data to initialize the camera using the पूर्णांकernal CCD
 */
अटल स्थिर u8 spca505b_खोलो_data_ccd[][3] = अणु

/* अणु0x02,0x00,0x00पूर्ण, */
	अणु0x03, 0x04, 0x01पूर्ण,		/* rst */
	अणु0x03, 0x00, 0x01पूर्ण,
	अणु0x03, 0x00, 0x00पूर्ण,
	अणु0x03, 0x21, 0x00पूर्ण,
	अणु0x03, 0x00, 0x04पूर्ण,
	अणु0x03, 0x00, 0x03पूर्ण,
	अणु0x03, 0x18, 0x03पूर्ण,
	अणु0x03, 0x08, 0x01पूर्ण,
	अणु0x03, 0x1c, 0x03पूर्ण,
	अणु0x03, 0x5c, 0x03पूर्ण,
	अणु0x03, 0x5c, 0x03पूर्ण,
	अणु0x03, 0x18, 0x01पूर्ण,

/* same as 505 */
	अणु0x04, 0x10, 0x01पूर्ण,
	अणु0x04, 0x00, 0x04पूर्ण,
	अणु0x04, 0x00, 0x05पूर्ण,
	अणु0x04, 0x20, 0x06पूर्ण,
	अणु0x04, 0x20, 0x07पूर्ण,

	अणु0x08, 0x0a, 0x00पूर्ण,

	अणु0x05, 0x00, 0x10पूर्ण,
	अणु0x05, 0x00, 0x11पूर्ण,
	अणु0x05, 0x00, 0x12पूर्ण,
	अणु0x05, 0x6f, 0x00पूर्ण,
	अणु0x05, initial_brightness >> 6, 0x00पूर्ण,
	अणु0x05, (initial_brightness << 2) & 0xff, 0x01पूर्ण,
	अणु0x05, 0x00, 0x02पूर्ण,
	अणु0x05, 0x01, 0x03पूर्ण,
	अणु0x05, 0x00, 0x04पूर्ण,
	अणु0x05, 0x03, 0x05पूर्ण,
	अणु0x05, 0xe0, 0x06पूर्ण,
	अणु0x05, 0x20, 0x07पूर्ण,
	अणु0x05, 0xa0, 0x08पूर्ण,
	अणु0x05, 0x00, 0x12पूर्ण,
	अणु0x05, 0x02, 0x0fपूर्ण,
	अणु0x05, 0x80, 0x14पूर्ण,		/* max exposure off (0=on) */
	अणु0x05, 0x01, 0xb0पूर्ण,
	अणु0x05, 0x01, 0xbfपूर्ण,
	अणु0x03, 0x02, 0x06पूर्ण,
	अणु0x05, 0x10, 0x46पूर्ण,
	अणु0x05, 0x08, 0x4aपूर्ण,

	अणु0x06, 0x00, 0x01पूर्ण,
	अणु0x06, 0x10, 0x02पूर्ण,
	अणु0x06, 0x64, 0x07पूर्ण,
	अणु0x06, 0x18, 0x08पूर्ण,
	अणु0x06, 0xfc, 0x09पूर्ण,
	अणु0x06, 0xfc, 0x0aपूर्ण,
	अणु0x06, 0xfc, 0x0bपूर्ण,
	अणु0x04, 0x00, 0x01पूर्ण,
	अणु0x06, 0x18, 0x0cपूर्ण,
	अणु0x06, 0xfc, 0x0dपूर्ण,
	अणु0x06, 0xfc, 0x0eपूर्ण,
	अणु0x06, 0xfc, 0x0fपूर्ण,
	अणु0x06, 0x11, 0x10पूर्ण,		/* contrast */
	अणु0x06, 0x00, 0x11पूर्ण,
	अणु0x06, 0xfe, 0x12पूर्ण,
	अणु0x06, 0x00, 0x13पूर्ण,
	अणु0x06, 0x00, 0x14पूर्ण,
	अणु0x06, 0x9d, 0x51पूर्ण,
	अणु0x06, 0x40, 0x52पूर्ण,
	अणु0x06, 0x7c, 0x53पूर्ण,
	अणु0x06, 0x40, 0x54पूर्ण,
	अणु0x06, 0x02, 0x57पूर्ण,
	अणु0x06, 0x03, 0x58पूर्ण,
	अणु0x06, 0x15, 0x59पूर्ण,
	अणु0x06, 0x05, 0x5aपूर्ण,
	अणु0x06, 0x03, 0x56पूर्ण,
	अणु0x06, 0x02, 0x3fपूर्ण,
	अणु0x06, 0x00, 0x40पूर्ण,
	अणु0x06, 0x39, 0x41पूर्ण,
	अणु0x06, 0x69, 0x42पूर्ण,
	अणु0x06, 0x87, 0x43पूर्ण,
	अणु0x06, 0x9e, 0x44पूर्ण,
	अणु0x06, 0xb1, 0x45पूर्ण,
	अणु0x06, 0xbf, 0x46पूर्ण,
	अणु0x06, 0xcc, 0x47पूर्ण,
	अणु0x06, 0xd5, 0x48पूर्ण,
	अणु0x06, 0xdd, 0x49पूर्ण,
	अणु0x06, 0xe3, 0x4aपूर्ण,
	अणु0x06, 0xe8, 0x4bपूर्ण,
	अणु0x06, 0xed, 0x4cपूर्ण,
	अणु0x06, 0xf2, 0x4dपूर्ण,
	अणु0x06, 0xf7, 0x4eपूर्ण,
	अणु0x06, 0xfc, 0x4fपूर्ण,
	अणु0x06, 0xff, 0x50पूर्ण,

	अणु0x05, 0x01, 0xc0पूर्ण,
	अणु0x05, 0x10, 0xcbपूर्ण,
	अणु0x05, 0x40, 0xc1पूर्ण,
	अणु0x05, 0x04, 0xc2पूर्ण,
	अणु0x05, 0x00, 0xcaपूर्ण,
	अणु0x05, 0x40, 0xc1पूर्ण,
	अणु0x05, 0x09, 0xc2पूर्ण,
	अणु0x05, 0x00, 0xcaपूर्ण,
	अणु0x05, 0xc0, 0xc1पूर्ण,
	अणु0x05, 0x09, 0xc2पूर्ण,
	अणु0x05, 0x00, 0xcaपूर्ण,
	अणु0x05, 0x40, 0xc1पूर्ण,
	अणु0x05, 0x59, 0xc2पूर्ण,
	अणु0x05, 0x00, 0xcaपूर्ण,
	अणु0x04, 0x00, 0x01पूर्ण,
	अणु0x05, 0x80, 0xc1पूर्ण,
	अणु0x05, 0xec, 0xc2पूर्ण,
	अणु0x05, 0x0, 0xcaपूर्ण,

	अणु0x06, 0x02, 0x57पूर्ण,
	अणु0x06, 0x01, 0x58पूर्ण,
	अणु0x06, 0x15, 0x59पूर्ण,
	अणु0x06, 0x0a, 0x5aपूर्ण,
	अणु0x06, 0x01, 0x57पूर्ण,
	अणु0x06, 0x8a, 0x03पूर्ण,
	अणु0x06, 0x0a, 0x6cपूर्ण,
	अणु0x06, 0x30, 0x01पूर्ण,
	अणु0x06, 0x20, 0x02पूर्ण,
	अणु0x06, 0x00, 0x03पूर्ण,

	अणु0x05, 0x8c, 0x25पूर्ण,

	अणु0x06, 0x4d, 0x51पूर्ण,		/* maybe saturation (4d) */
	अणु0x06, 0x84, 0x53पूर्ण,		/* making green (84) */
	अणु0x06, 0x00, 0x57पूर्ण,		/* sharpness (1) */
	अणु0x06, 0x18, 0x08पूर्ण,
	अणु0x06, 0xfc, 0x09पूर्ण,
	अणु0x06, 0xfc, 0x0aपूर्ण,
	अणु0x06, 0xfc, 0x0bपूर्ण,
	अणु0x06, 0x18, 0x0cपूर्ण,		/* maybe hue (18) */
	अणु0x06, 0xfc, 0x0dपूर्ण,
	अणु0x06, 0xfc, 0x0eपूर्ण,
	अणु0x06, 0xfc, 0x0fपूर्ण,
	अणु0x06, 0x18, 0x10पूर्ण,		/* maybe contrast (18) */

	अणु0x05, 0x01, 0x02पूर्ण,

	अणु0x04, 0x00, 0x08पूर्ण,		/* compression */
	अणु0x04, 0x12, 0x09पूर्ण,
	अणु0x04, 0x21, 0x0aपूर्ण,
	अणु0x04, 0x10, 0x0bपूर्ण,
	अणु0x04, 0x21, 0x0cपूर्ण,
	अणु0x04, 0x1d, 0x00पूर्ण,		/* imagetype (1d) */
	अणु0x04, 0x41, 0x01पूर्ण,		/* hardware snapcontrol */

	अणु0x04, 0x00, 0x04पूर्ण,
	अणु0x04, 0x00, 0x05पूर्ण,
	अणु0x04, 0x10, 0x06पूर्ण,
	अणु0x04, 0x10, 0x07पूर्ण,
	अणु0x04, 0x40, 0x06पूर्ण,
	अणु0x04, 0x40, 0x07पूर्ण,
	अणु0x04, 0x00, 0x04पूर्ण,
	अणु0x04, 0x00, 0x05पूर्ण,

	अणु0x06, 0x1c, 0x17पूर्ण,
	अणु0x06, 0xe2, 0x19पूर्ण,
	अणु0x06, 0x1c, 0x1bपूर्ण,
	अणु0x06, 0xe2, 0x1dपूर्ण,
	अणु0x06, 0x5f, 0x1fपूर्ण,
	अणु0x06, 0x32, 0x20पूर्ण,

	अणु0x05, initial_brightness >> 6, 0x00पूर्ण,
	अणु0x05, (initial_brightness << 2) & 0xff, 0x01पूर्ण,
	अणु0x05, 0x06, 0xc1पूर्ण,
	अणु0x05, 0x58, 0xc2पूर्ण,
	अणु0x05, 0x00, 0xcaपूर्ण,
	अणु0x05, 0x00, 0x11पूर्ण,
	अणुपूर्ण
पूर्ण;

अटल पूर्णांक reg_ग_लिखो(काष्ठा gspca_dev *gspca_dev,
		     u16 req, u16 index, u16 value)
अणु
	पूर्णांक ret;
	काष्ठा usb_device *dev = gspca_dev->dev;

	ret = usb_control_msg(dev,
			usb_sndctrlpipe(dev, 0),
			req,
			USB_TYPE_VENDOR | USB_RECIP_DEVICE,
			value, index, शून्य, 0, 500);
	gspca_dbg(gspca_dev, D_USBO, "reg write: 0x%02x,0x%02x:0x%02x, %d\n",
		  req, index, value, ret);
	अगर (ret < 0)
		pr_err("reg write: error %d\n", ret);
	वापस ret;
पूर्ण

/* वापसs: negative is error, pos or zero is data */
अटल पूर्णांक reg_पढ़ो(काष्ठा gspca_dev *gspca_dev,
			u16 req,	/* bRequest */
			u16 index)	/* wIndex */
अणु
	पूर्णांक ret;

	ret = usb_control_msg(gspca_dev->dev,
			usb_rcvctrlpipe(gspca_dev->dev, 0),
			req,
			USB_सूची_IN | USB_TYPE_VENDOR | USB_RECIP_DEVICE,
			0,			/* value */
			index,
			gspca_dev->usb_buf, 2,
			500);			/* समयout */
	अगर (ret < 0)
		वापस ret;
	वापस (gspca_dev->usb_buf[1] << 8) + gspca_dev->usb_buf[0];
पूर्ण

अटल पूर्णांक ग_लिखो_vector(काष्ठा gspca_dev *gspca_dev,
			स्थिर u8 data[][3])
अणु
	पूर्णांक ret, i = 0;

	जबतक (data[i][0] != 0) अणु
		ret = reg_ग_लिखो(gspca_dev, data[i][0], data[i][2],
								data[i][1]);
		अगर (ret < 0)
			वापस ret;
		i++;
	पूर्ण
	वापस 0;
पूर्ण

/* this function is called at probe समय */
अटल पूर्णांक sd_config(काष्ठा gspca_dev *gspca_dev,
			स्थिर काष्ठा usb_device_id *id)
अणु
	काष्ठा sd *sd = (काष्ठा sd *) gspca_dev;
	काष्ठा cam *cam;

	cam = &gspca_dev->cam;
	cam->cam_mode = vga_mode;
	sd->subtype = id->driver_info;
	अगर (sd->subtype != IntelPCCameraPro)
		cam->nmodes = ARRAY_SIZE(vga_mode);
	अन्यथा			/* no 640x480 क्रम IntelPCCameraPro */
		cam->nmodes = ARRAY_SIZE(vga_mode) - 1;

	वापस 0;
पूर्ण

/* this function is called at probe and resume समय */
अटल पूर्णांक sd_init(काष्ठा gspca_dev *gspca_dev)
अणु
	काष्ठा sd *sd = (काष्ठा sd *) gspca_dev;

	अगर (ग_लिखो_vector(gspca_dev,
			 sd->subtype == Nxultra
				? spca505b_init_data
				: spca505_init_data))
		वापस -EIO;
	वापस 0;
पूर्ण

अटल व्योम setbrightness(काष्ठा gspca_dev *gspca_dev, s32 brightness)
अणु
	reg_ग_लिखो(gspca_dev, 0x05, 0x00, (255 - brightness) >> 6);
	reg_ग_लिखो(gspca_dev, 0x05, 0x01, (255 - brightness) << 2);
पूर्ण

अटल पूर्णांक sd_start(काष्ठा gspca_dev *gspca_dev)
अणु
	काष्ठा sd *sd = (काष्ठा sd *) gspca_dev;
	पूर्णांक ret, mode;
	अटल u8 mode_tb[][3] = अणु
	/*	  r00   r06   r07	*/
		अणु0x00, 0x10, 0x10पूर्ण,	/* 640x480 */
		अणु0x01, 0x1a, 0x1aपूर्ण,	/* 352x288 */
		अणु0x02, 0x1c, 0x1dपूर्ण,	/* 320x240 */
		अणु0x04, 0x34, 0x34पूर्ण,	/* 176x144 */
		अणु0x05, 0x40, 0x40पूर्ण	/* 160x120 */
	पूर्ण;

	अगर (sd->subtype == Nxultra)
		ग_लिखो_vector(gspca_dev, spca505b_खोलो_data_ccd);
	अन्यथा
		ग_लिखो_vector(gspca_dev, spca505_खोलो_data_ccd);
	ret = reg_पढ़ो(gspca_dev, 0x06, 0x16);

	अगर (ret < 0) अणु
		gspca_err(gspca_dev, "register read failed err: %d\n", ret);
		वापस ret;
	पूर्ण
	अगर (ret != 0x0101) अणु
		pr_err("After vector read returns 0x%04x should be 0x0101\n",
		       ret);
	पूर्ण

	ret = reg_ग_लिखो(gspca_dev, 0x06, 0x16, 0x0a);
	अगर (ret < 0)
		वापस ret;
	reg_ग_लिखो(gspca_dev, 0x05, 0xc2, 0x12);

	/* necessary because without it we can see stream
	 * only once after loading module */
	/* stopping usb रेजिस्टरs Tomasz change */
	reg_ग_लिखो(gspca_dev, 0x02, 0x00, 0x00);

	mode = gspca_dev->cam.cam_mode[(पूर्णांक) gspca_dev->curr_mode].priv;
	reg_ग_लिखो(gspca_dev, SPCA50X_REG_COMPRESS, 0x00, mode_tb[mode][0]);
	reg_ग_लिखो(gspca_dev, SPCA50X_REG_COMPRESS, 0x06, mode_tb[mode][1]);
	reg_ग_लिखो(gspca_dev, SPCA50X_REG_COMPRESS, 0x07, mode_tb[mode][2]);

	वापस reg_ग_लिखो(gspca_dev, SPCA50X_REG_USB,
			 SPCA50X_USB_CTRL,
			 SPCA50X_CUSB_ENABLE);
पूर्ण

अटल व्योम sd_stopN(काष्ठा gspca_dev *gspca_dev)
अणु
	/* Disable ISO packet machine */
	reg_ग_लिखो(gspca_dev, 0x02, 0x00, 0x00);
पूर्ण

/* called on streamoff with alt 0 and on disconnect */
अटल व्योम sd_stop0(काष्ठा gspca_dev *gspca_dev)
अणु
	अगर (!gspca_dev->present)
		वापस;

	/* This maybe reset or घातer control */
	reg_ग_लिखो(gspca_dev, 0x03, 0x03, 0x20);
	reg_ग_लिखो(gspca_dev, 0x03, 0x01, 0x00);
	reg_ग_लिखो(gspca_dev, 0x03, 0x00, 0x01);
	reg_ग_लिखो(gspca_dev, 0x05, 0x10, 0x01);
	reg_ग_लिखो(gspca_dev, 0x05, 0x11, 0x0f);
पूर्ण

अटल व्योम sd_pkt_scan(काष्ठा gspca_dev *gspca_dev,
			u8 *data,			/* isoc packet */
			पूर्णांक len)			/* iso packet length */
अणु
	चयन (data[0]) अणु
	हाल 0:				/* start of frame */
		gspca_frame_add(gspca_dev, LAST_PACKET, शून्य, 0);
		data += SPCA50X_OFFSET_DATA;
		len -= SPCA50X_OFFSET_DATA;
		gspca_frame_add(gspca_dev, FIRST_PACKET, data, len);
		अवरोध;
	हाल 0xff:			/* drop */
		अवरोध;
	शेष:
		data += 1;
		len -= 1;
		gspca_frame_add(gspca_dev, INTER_PACKET, data, len);
		अवरोध;
	पूर्ण
पूर्ण

अटल पूर्णांक sd_s_ctrl(काष्ठा v4l2_ctrl *ctrl)
अणु
	काष्ठा gspca_dev *gspca_dev =
		container_of(ctrl->handler, काष्ठा gspca_dev, ctrl_handler);

	gspca_dev->usb_err = 0;

	अगर (!gspca_dev->streaming)
		वापस 0;

	चयन (ctrl->id) अणु
	हाल V4L2_CID_BRIGHTNESS:
		setbrightness(gspca_dev, ctrl->val);
		अवरोध;
	पूर्ण
	वापस gspca_dev->usb_err;
पूर्ण

अटल स्थिर काष्ठा v4l2_ctrl_ops sd_ctrl_ops = अणु
	.s_ctrl = sd_s_ctrl,
पूर्ण;

अटल पूर्णांक sd_init_controls(काष्ठा gspca_dev *gspca_dev)
अणु
	काष्ठा v4l2_ctrl_handler *hdl = &gspca_dev->ctrl_handler;

	gspca_dev->vdev.ctrl_handler = hdl;
	v4l2_ctrl_handler_init(hdl, 5);
	v4l2_ctrl_new_std(hdl, &sd_ctrl_ops,
			V4L2_CID_BRIGHTNESS, 0, 255, 1, 127);

	अगर (hdl->error) अणु
		pr_err("Could not initialize controls\n");
		वापस hdl->error;
	पूर्ण
	वापस 0;
पूर्ण

/* sub-driver description */
अटल स्थिर काष्ठा sd_desc sd_desc = अणु
	.name = MODULE_NAME,
	.config = sd_config,
	.init_controls = sd_init_controls,
	.init = sd_init,
	.start = sd_start,
	.stopN = sd_stopN,
	.stop0 = sd_stop0,
	.pkt_scan = sd_pkt_scan,
पूर्ण;

/* -- module initialisation -- */
अटल स्थिर काष्ठा usb_device_id device_table[] = अणु
	अणुUSB_DEVICE(0x041e, 0x401d), .driver_info = Nxultraपूर्ण,
	अणुUSB_DEVICE(0x0733, 0x0430), .driver_info = IntelPCCameraProपूर्ण,
/*fixme: may be UsbGrabberPV321 BRIDGE_SPCA506 SENSOR_SAA7113 */
	अणुपूर्ण
पूर्ण;
MODULE_DEVICE_TABLE(usb, device_table);

/* -- device connect -- */
अटल पूर्णांक sd_probe(काष्ठा usb_पूर्णांकerface *पूर्णांकf,
			स्थिर काष्ठा usb_device_id *id)
अणु
	वापस gspca_dev_probe(पूर्णांकf, id, &sd_desc, माप(काष्ठा sd),
				THIS_MODULE);
पूर्ण

अटल काष्ठा usb_driver sd_driver = अणु
	.name = MODULE_NAME,
	.id_table = device_table,
	.probe = sd_probe,
	.disconnect = gspca_disconnect,
#अगर_घोषित CONFIG_PM
	.suspend = gspca_suspend,
	.resume = gspca_resume,
	.reset_resume = gspca_resume,
#पूर्ण_अगर
पूर्ण;

module_usb_driver(sd_driver);
