<शैली गुरु>
/* SPDX-License-Identअगरier: GPL-2.0-or-later */
/*
 * DVB USB Linux driver क्रम Anysee E30 DVB-C & DVB-T USB2.0 receiver
 *
 * Copyright (C) 2007 Antti Palosaari <crope@iki.fi>
 *
 * TODO:
 * - add smart card पढ़ोer support क्रम Conditional Access (CA)
 *
 * Card पढ़ोer in Anysee is nothing more than ISO 7816 card पढ़ोer.
 * There is no hardware CAM in any Anysee device sold.
 * In my understanding it should be implemented by making own module
 * क्रम ISO 7816 card पढ़ोer, like dvb_ca_en50221 is implemented. This
 * module रेजिस्टरs serial पूर्णांकerface that can be used to communicate
 * with any ISO 7816 smart card.
 *
 * Any help according to implement serial smart card पढ़ोer support
 * is highly welcome!
 */

#अगर_अघोषित _DVB_USB_ANYSEE_H_
#घोषणा _DVB_USB_ANYSEE_H_

#घोषणा DVB_USB_LOG_PREFIX "anysee"
#समावेश "dvb_usb.h"
#समावेश <media/dvb_ca_en50221.h>

क्रमागत cmd अणु
	CMD_I2C_READ            = 0x33,
	CMD_I2C_WRITE           = 0x31,
	CMD_REG_READ            = 0xb0,
	CMD_REG_WRITE           = 0xb1,
	CMD_STREAMING_CTRL      = 0x12,
	CMD_LED_AND_IR_CTRL     = 0x16,
	CMD_GET_IR_CODE         = 0x41,
	CMD_GET_HW_INFO         = 0x19,
	CMD_SMARTCARD           = 0x34,
	CMD_CI                  = 0x37,
पूर्ण;

काष्ठा anysee_state अणु
	u8 buf[64];
	u8 seq;
	u8 hw; /* PCB ID */
	#घोषणा ANYSEE_I2C_CLIENT_MAX 1
	काष्ठा i2c_client *i2c_client[ANYSEE_I2C_CLIENT_MAX];
	u8 fe_id:1; /* frondend ID */
	u8 has_ci:1;
	u8 has_tda18212:1;
	u8 ci_attached:1;
	काष्ठा dvb_ca_en50221 ci;
	अचिन्हित दीर्घ ci_cam_पढ़ोy; /* jअगरfies */
पूर्ण;

#घोषणा ANYSEE_HW_507T    2 /* E30 */
#घोषणा ANYSEE_HW_507CD   6 /* E30 Plus */
#घोषणा ANYSEE_HW_507DC  10 /* E30 C Plus */
#घोषणा ANYSEE_HW_507SI  11 /* E30 S2 Plus */
#घोषणा ANYSEE_HW_507FA  15 /* E30 Combo Plus / E30 C Plus */
#घोषणा ANYSEE_HW_508TC  18 /* E7 TC */
#घोषणा ANYSEE_HW_508S2  19 /* E7 S2 */
#घोषणा ANYSEE_HW_508T2C 20 /* E7 T2C */
#घोषणा ANYSEE_HW_508PTC 21 /* E7 PTC Plus */
#घोषणा ANYSEE_HW_508PS2 22 /* E7 PS2 Plus */

#घोषणा REG_IOA       0x80 /* Port A (bit addressable) */
#घोषणा REG_IOB       0x90 /* Port B (bit addressable) */
#घोषणा REG_IOC       0xa0 /* Port C (bit addressable) */
#घोषणा REG_IOD       0xb0 /* Port D (bit addressable) */
#घोषणा REG_IOE       0xb1 /* Port E (NOT bit addressable) */
#घोषणा REG_OEA       0xb2 /* Port A Output Enable */
#घोषणा REG_OEB       0xb3 /* Port B Output Enable */
#घोषणा REG_OEC       0xb4 /* Port C Output Enable */
#घोषणा REG_OED       0xb5 /* Port D Output Enable */
#घोषणा REG_OEE       0xb6 /* Port E Output Enable */

#पूर्ण_अगर

/***************************************************************************
 * USB API description (reverse engineered)
 ***************************************************************************

Transaction flow:
=================
BULK[00001] >>> REQUEST PACKET 64 bytes
BULK[00081] <<< REPLY PACKET #1 64 bytes (PREVIOUS TRANSACTION REPLY)
BULK[00081] <<< REPLY PACKET #2 64 bytes (CURRENT TRANSACTION REPLY)

General reply packet(s) are always used अगर not own reply defined.

============================================================================
| 00-63 | GENERAL REPLY PACKET #1 (PREVIOUS REPLY)
============================================================================
|    00 | reply data (अगर any) from previous transaction
|       | Just same reply packet as वापसed during previous transaction.
|       | Needed only अगर reply is missed in previous transaction.
|       | Just skip normally.
----------------------------------------------------------------------------
| 01-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | GENERAL REPLY PACKET #2 (CURRENT REPLY)
============================================================================
|    00 | reply data (अगर any)
----------------------------------------------------------------------------
| 01-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | I2C WRITE REQUEST PACKET
============================================================================
|    00 | 0x31 I2C ग_लिखो command
----------------------------------------------------------------------------
|    01 | i2c address
----------------------------------------------------------------------------
|    02 | data length
|       | 0x02 (क्रम typical I2C reg / val pair)
----------------------------------------------------------------------------
|    03 | 0x01
----------------------------------------------------------------------------
| 04-   | data
----------------------------------------------------------------------------
|   -59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | I2C READ REQUEST PACKET
============================================================================
|    00 | 0x33 I2C पढ़ो command
----------------------------------------------------------------------------
|    01 | i2c address + 1
----------------------------------------------------------------------------
|    02 | रेजिस्टर
----------------------------------------------------------------------------
|    03 | 0x00
----------------------------------------------------------------------------
|    04 | 0x00
----------------------------------------------------------------------------
|    05 | data length
----------------------------------------------------------------------------
| 06-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | USB CONTROLLER REGISTER WRITE REQUEST PACKET
============================================================================
|    00 | 0xb1 रेजिस्टर ग_लिखो command
----------------------------------------------------------------------------
| 01-02 | रेजिस्टर
----------------------------------------------------------------------------
|    03 | 0x01
----------------------------------------------------------------------------
|    04 | value
----------------------------------------------------------------------------
| 05-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | USB CONTROLLER REGISTER READ REQUEST PACKET
============================================================================
|    00 | 0xb0 रेजिस्टर पढ़ो command
----------------------------------------------------------------------------
| 01-02 | रेजिस्टर
----------------------------------------------------------------------------
|    03 | 0x01
----------------------------------------------------------------------------
| 04-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | LED CONTROL REQUEST PACKET
============================================================================
|    00 | 0x16 LED and IR control command
----------------------------------------------------------------------------
|    01 | 0x01 (LED)
----------------------------------------------------------------------------
|    03 | 0x00 blink
|       | 0x01 lights continuously
----------------------------------------------------------------------------
|    04 | blink पूर्णांकerval
|       | 0x00 fastest (looks like LED lights continuously)
|       | 0xff slowest
----------------------------------------------------------------------------
| 05-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | IR CONTROL REQUEST PACKET
============================================================================
|    00 | 0x16 LED and IR control command
----------------------------------------------------------------------------
|    01 | 0x02 (IR)
----------------------------------------------------------------------------
|    03 | 0x00 IR disabled
|       | 0x01 IR enabled
----------------------------------------------------------------------------
| 04-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | STREAMING CONTROL REQUEST PACKET
============================================================================
|    00 | 0x12 streaming control command
----------------------------------------------------------------------------
|    01 | 0x00 streaming disabled
|       | 0x01 streaming enabled
----------------------------------------------------------------------------
|    02 | 0x00
----------------------------------------------------------------------------
| 03-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | REMOTE CONTROL REQUEST PACKET
============================================================================
|    00 | 0x41 remote control command
----------------------------------------------------------------------------
| 01-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | REMOTE CONTROL REPLY PACKET
============================================================================
|    00 | 0x00 code not received
|       | 0x01 code received
----------------------------------------------------------------------------
|    01 | remote control code
----------------------------------------------------------------------------
| 02-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | GET HARDWARE INFO REQUEST PACKET
============================================================================
|    00 | 0x19 get hardware info command
----------------------------------------------------------------------------
| 01-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | GET HARDWARE INFO REPLY PACKET
============================================================================
|    00 | hardware id
----------------------------------------------------------------------------
| 01-02 | firmware version
----------------------------------------------------------------------------
| 03-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

============================================================================
| 00-63 | SMART CARD READER PACKET
============================================================================
|    00 | 0x34 smart card पढ़ोer command
----------------------------------------------------------------------------
|    xx |
----------------------------------------------------------------------------
| xx-59 | करोn't care
----------------------------------------------------------------------------
|    60 | packet sequence number
----------------------------------------------------------------------------
| 61-63 | करोn't care
----------------------------------------------------------------------------

*/
