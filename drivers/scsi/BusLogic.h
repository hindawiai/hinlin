<शैली गुरु>
/* SPDX-License-Identअगरier: GPL-2.0-only */
/*

  Linux Driver क्रम BusLogic MultiMaster and FlashPoपूर्णांक SCSI Host Adapters

  Copyright 1995-1998 by Leonard N. Zubkoff <lnz@dandelion.com>


  The author respectfully requests that any modअगरications to this software be
  sent directly to him क्रम evaluation and testing.

  Special thanks to Wayne Yen, Jin-Lon Hon, and Alex Win of BusLogic, whose
  advice has been invaluable, to David Gentzel, क्रम writing the original Linux
  BusLogic driver, and to Paul Gorपंचांगaker, क्रम being such a dedicated test site.

  Finally, special thanks to Mylex/BusLogic क्रम making the FlashPoपूर्णांक SCCB
  Manager available as मुक्तly redistributable source code.

*/

#अगर_अघोषित _BUSLOGIC_H
#घोषणा _BUSLOGIC_H


#अगर_अघोषित PACKED
#घोषणा PACKED __attribute__((packed))
#पूर्ण_अगर

/*
  Define the maximum number of BusLogic Host Adapters supported by this driver.
*/

#घोषणा BLOGIC_MAX_ADAPTERS		16


/*
  Define the maximum number of Target Devices supported by this driver.
*/

#घोषणा BLOGIC_MAXDEV			16


/*
  Define the maximum number of Scatter/Gather Segments used by this driver.
  For optimal perक्रमmance, it is important that this limit be at least as
  large as the largest single request generated by the I/O Subप्रणाली.
*/

#घोषणा BLOGIC_SG_LIMIT		128


/*
  Define the maximum, maximum स्वतःmatic, minimum स्वतःmatic, and शेष Queue
  Depth to allow क्रम Target Devices depending on whether or not they support
  Tagged Queuing and whether or not ISA Bounce Buffers are required.
*/

#घोषणा BLOGIC_MAX_TAG_DEPTH		64
#घोषणा BLOGIC_MAX_AUTO_TAG_DEPTH	28
#घोषणा BLOGIC_MIN_AUTO_TAG_DEPTH	7
#घोषणा BLOGIC_TAG_DEPTH_BB		3
#घोषणा BLOGIC_UNTAG_DEPTH		3
#घोषणा BLOGIC_UNTAG_DEPTH_BB		2


/*
  Define the शेष amount of समय in seconds to रुको between a Host Adapter
  Hard Reset which initiates a SCSI Bus Reset and issuing any SCSI commands.
  Some SCSI devices get confused अगर they receive SCSI commands too soon after
  a SCSI Bus Reset.
*/

#घोषणा BLOGIC_BUS_SETTLE_TIME		2


/*
  Define the maximum number of Mailboxes that should be used क्रम MultiMaster
  Host Adapters.  This number is chosen to be larger than the maximum Host
  Adapter Queue Depth and small enough so that the Host Adapter काष्ठाure
  करोes not cross an allocation block size boundary.
*/

#घोषणा BLOGIC_MAX_MAILBOX		211


/*
  Define the number of CCBs that should be allocated as a group to optimize
  Kernel memory allocation.
*/

#घोषणा BLOGIC_CCB_GRP_ALLOCSIZE	7


/*
  Define the Host Adapter Line and Message Buffer Sizes.
*/

#घोषणा BLOGIC_LINEBUF_SIZE		100
#घोषणा BLOGIC_MSGBUF_SIZE		9700


/*
  Define the Driver Message Levels.
*/

क्रमागत blogic_msglevel अणु
	BLOGIC_ANNOUNCE_LEVEL = 0,
	BLOGIC_INFO_LEVEL = 1,
	BLOGIC_NOTICE_LEVEL = 2,
	BLOGIC_WARN_LEVEL = 3,
	BLOGIC_ERR_LEVEL = 4
पूर्ण;

अटल अक्षर *blogic_msglevelmap[] = अणु KERN_NOTICE, KERN_NOTICE, KERN_NOTICE, KERN_WARNING, KERN_ERR पूर्ण;


/*
  Define Driver Message macros.
*/

#घोषणा blogic_announce(क्रमmat, args...) \
	blogic_msg(BLOGIC_ANNOUNCE_LEVEL, क्रमmat, ##args)

#घोषणा blogic_info(क्रमmat, args...) \
	blogic_msg(BLOGIC_INFO_LEVEL, क्रमmat, ##args)

#घोषणा blogic_notice(क्रमmat, args...) \
	blogic_msg(BLOGIC_NOTICE_LEVEL, क्रमmat, ##args)

#घोषणा blogic_warn(क्रमmat, args...) \
	blogic_msg(BLOGIC_WARN_LEVEL, क्रमmat, ##args)

#घोषणा blogic_err(क्रमmat, args...) \
	blogic_msg(BLOGIC_ERR_LEVEL, क्रमmat, ##args)


/*
  Define the types of BusLogic Host Adapters that are supported and the number
  of I/O Addresses required by each type.
*/

क्रमागत blogic_adapter_type अणु
	BLOGIC_MULTIMASTER = 1,
	BLOGIC_FLASHPOINT = 2
पूर्ण PACKED;

#घोषणा BLOGIC_MULTIMASTER_ADDR_COUNT	4
#घोषणा BLOGIC_FLASHPOINT_ADDR_COUNT	256

अटल पूर्णांक blogic_adapter_addr_count[3] = अणु 0, BLOGIC_MULTIMASTER_ADDR_COUNT, BLOGIC_FLASHPOINT_ADDR_COUNT पूर्ण;


/*
  Define macros क्रम testing the Host Adapter Type.
*/

#अगर_घोषित CONFIG_SCSI_FLASHPOINT

#घोषणा blogic_multimaster_type(adapter) \
	(adapter->adapter_type == BLOGIC_MULTIMASTER)

#घोषणा blogic_flashpoपूर्णांक_type(adapter) \
	(adapter->adapter_type == BLOGIC_FLASHPOINT)

#अन्यथा

#घोषणा blogic_multimaster_type(adapter)	(true)
#घोषणा blogic_flashpoपूर्णांक_type(adapter)		(false)

#पूर्ण_अगर


/*
  Define the possible Host Adapter Bus Types.
*/

क्रमागत blogic_adapter_bus_type अणु
	BLOGIC_UNKNOWN_BUS = 0,
	BLOGIC_ISA_BUS = 1,
	BLOGIC_EISA_BUS = 2,
	BLOGIC_PCI_BUS = 3,
	BLOGIC_VESA_BUS = 4,
	BLOGIC_MCA_BUS = 5
पूर्ण PACKED;

अटल अक्षर *blogic_adapter_busnames[] = अणु "Unknown", "ISA", "EISA", "PCI", "VESA", "MCA" पूर्ण;

अटल क्रमागत blogic_adapter_bus_type blogic_adater_bus_types[] = अणु
	BLOGIC_VESA_BUS,	/* BT-4xx */
	BLOGIC_ISA_BUS,		/* BT-5xx */
	BLOGIC_MCA_BUS,		/* BT-6xx */
	BLOGIC_EISA_BUS,	/* BT-7xx */
	BLOGIC_UNKNOWN_BUS,	/* BT-8xx */
	BLOGIC_PCI_BUS		/* BT-9xx */
पूर्ण;

/*
  Define the possible Host Adapter BIOS Disk Geometry Translations.
*/

क्रमागत blogic_bios_diskgeometry अणु
	BLOGIC_BIOS_NODISK = 0,
	BLOGIC_BIOS_DISK64x32 = 1,
	BLOGIC_BIOS_DISK128x32 = 2,
	BLOGIC_BIOS_DISK255x63 = 3
पूर्ण PACKED;


/*
  Define a 10^18 Statistics Byte Counter data type.
*/

काष्ठा blogic_byte_count अणु
	अचिन्हित पूर्णांक units;
	अचिन्हित पूर्णांक billions;
पूर्ण;


/*
  Define the काष्ठाure क्रम I/O Address and Bus Probing Inक्रमmation.
*/

काष्ठा blogic_probeinfo अणु
	क्रमागत blogic_adapter_type adapter_type;
	क्रमागत blogic_adapter_bus_type adapter_bus_type;
	अचिन्हित दीर्घ io_addr;
	अचिन्हित दीर्घ pci_addr;
	काष्ठा pci_dev *pci_device;
	अचिन्हित अक्षर bus;
	अचिन्हित अक्षर dev;
	अचिन्हित अक्षर irq_ch;
पूर्ण;

/*
  Define the Probe Options.
*/

काष्ठा blogic_probe_options अणु
	bool noprobe:1;			/* Bit 0 */
	bool noprobe_pci:1;		/* Bit 2 */
	bool nosort_pci:1;		/* Bit 3 */
	bool multimaster_first:1;	/* Bit 4 */
	bool flashpoपूर्णांक_first:1;	/* Bit 5 */
पूर्ण;

/*
  Define the Global Options.
*/

काष्ठा blogic_global_options अणु
	bool trace_probe:1;	/* Bit 0 */
	bool trace_hw_reset:1;	/* Bit 1 */
	bool trace_config:1;	/* Bit 2 */
	bool trace_err:1;	/* Bit 3 */
पूर्ण;

/*
  Define the BusLogic SCSI Host Adapter I/O Register Offsets.
*/

#घोषणा BLOGIC_CNTRL_REG	0	/* WO रेजिस्टर */
#घोषणा BLOGIC_STATUS_REG	0	/* RO रेजिस्टर */
#घोषणा BLOGIC_CMD_PARM_REG	1	/* WO रेजिस्टर */
#घोषणा BLOGIC_DATAIN_REG	1	/* RO रेजिस्टर */
#घोषणा BLOGIC_INT_REG		2	/* RO रेजिस्टर */
#घोषणा BLOGIC_GEOMETRY_REG	3	/* RO रेजिस्टर */

/*
  Define the काष्ठाure of the ग_लिखो-only Control Register.
*/

जोड़ blogic_cntrl_reg अणु
	अचिन्हित अक्षर all;
	काष्ठा अणु
		अचिन्हित अक्षर:4;	/* Bits 0-3 */
		bool bus_reset:1;	/* Bit 4 */
		bool पूर्णांक_reset:1;	/* Bit 5 */
		bool soft_reset:1;	/* Bit 6 */
		bool hard_reset:1;	/* Bit 7 */
	पूर्ण cr;
पूर्ण;

/*
  Define the काष्ठाure of the पढ़ो-only Status Register.
*/

जोड़ blogic_stat_reg अणु
	अचिन्हित अक्षर all;
	काष्ठा अणु
		bool cmd_invalid:1;	/* Bit 0 */
		bool rsvd:1;		/* Bit 1 */
		bool datain_पढ़ोy:1;	/* Bit 2 */
		bool cmd_param_busy:1;	/* Bit 3 */
		bool adapter_पढ़ोy:1;	/* Bit 4 */
		bool init_reqd:1;	/* Bit 5 */
		bool diag_failed:1;	/* Bit 6 */
		bool diag_active:1;	/* Bit 7 */
	पूर्ण sr;
पूर्ण;

/*
  Define the काष्ठाure of the पढ़ो-only Interrupt Register.
*/

जोड़ blogic_पूर्णांक_reg अणु
	अचिन्हित अक्षर all;
	काष्ठा अणु
		bool mailin_loaded:1;	/* Bit 0 */
		bool mailout_avail:1;	/* Bit 1 */
		bool cmd_complete:1;	/* Bit 2 */
		bool ext_busreset:1;	/* Bit 3 */
		अचिन्हित अक्षर rsvd:3;	/* Bits 4-6 */
		bool पूर्णांक_valid:1;	/* Bit 7 */
	पूर्ण ir;
पूर्ण;

/*
  Define the काष्ठाure of the पढ़ो-only Geometry Register.
*/

जोड़ blogic_geo_reg अणु
	अचिन्हित अक्षर all;
	काष्ठा अणु
		क्रमागत blogic_bios_diskgeometry d0_geo:2;	/* Bits 0-1 */
		क्रमागत blogic_bios_diskgeometry d1_geo:2;	/* Bits 2-3 */
		अचिन्हित अक्षर:3;	/* Bits 4-6 */
		bool ext_trans_enable:1;	/* Bit 7 */
	पूर्ण gr;
पूर्ण;

/*
  Define the BusLogic SCSI Host Adapter Command Register Operation Codes.
*/

क्रमागत blogic_opcode अणु
	BLOGIC_TEST_CMP_COMPLETE = 0x00,
	BLOGIC_INIT_MBOX = 0x01,
	BLOGIC_EXEC_MBOX_CMD = 0x02,
	BLOGIC_EXEC_BIOS_CMD = 0x03,
	BLOGIC_GET_BOARD_ID = 0x04,
	BLOGIC_ENABLE_OUTBOX_AVAIL_INT = 0x05,
	BLOGIC_SET_SELECT_TIMEOUT = 0x06,
	BLOGIC_SET_PREEMPT_TIME = 0x07,
	BLOGIC_SET_TIMखातापूर्णF_BUS = 0x08,
	BLOGIC_SET_TXRATE = 0x09,
	BLOGIC_INQ_DEV0TO7 = 0x0A,
	BLOGIC_INQ_CONFIG = 0x0B,
	BLOGIC_TGT_MODE = 0x0C,
	BLOGIC_INQ_SETUPINFO = 0x0D,
	BLOGIC_WRITE_LOCALRAM = 0x1A,
	BLOGIC_READ_LOCALRAM = 0x1B,
	BLOGIC_WRITE_BUSMASTER_FIFO = 0x1C,
	BLOGIC_READ_BUSMASTER_FIFO = 0x1D,
	BLOGIC_ECHO_CMDDATA = 0x1F,
	BLOGIC_ADAPTER_DIAG = 0x20,
	BLOGIC_SET_OPTIONS = 0x21,
	BLOGIC_INQ_DEV8TO15 = 0x23,
	BLOGIC_INQ_DEV = 0x24,
	BLOGIC_DISABLE_INT = 0x25,
	BLOGIC_INIT_EXT_MBOX = 0x81,
	BLOGIC_EXEC_SCS_CMD = 0x83,
	BLOGIC_INQ_FWVER_D3 = 0x84,
	BLOGIC_INQ_FWVER_LETTER = 0x85,
	BLOGIC_INQ_PCI_INFO = 0x86,
	BLOGIC_INQ_MODELNO = 0x8B,
	BLOGIC_INQ_SYNC_PERIOD = 0x8C,
	BLOGIC_INQ_EXTSETUP = 0x8D,
	BLOGIC_STRICT_RR = 0x8F,
	BLOGIC_STORE_LOCALRAM = 0x90,
	BLOGIC_FETCH_LOCALRAM = 0x91,
	BLOGIC_STORE_TO_EEPROM = 0x92,
	BLOGIC_LOAD_AUTOSCSICODE = 0x94,
	BLOGIC_MOD_IOADDR = 0x95,
	BLOGIC_SETCCB_FMT = 0x96,
	BLOGIC_WRITE_INQBUF = 0x9A,
	BLOGIC_READ_INQBUF = 0x9B,
	BLOGIC_FLASH_LOAD = 0xA7,
	BLOGIC_READ_SCAMDATA = 0xA8,
	BLOGIC_WRITE_SCAMDATA = 0xA9
पूर्ण;

/*
  Define the Inquire Board ID reply काष्ठाure.
*/

काष्ठा blogic_board_id अणु
	अचिन्हित अक्षर type;		/* Byte 0 */
	अचिन्हित अक्षर custom_features;	/* Byte 1 */
	अचिन्हित अक्षर fw_ver_digit1;	/* Byte 2 */
	अचिन्हित अक्षर fw_ver_digit2;	/* Byte 3 */
पूर्ण;

/*
  Define the Inquire Configuration reply काष्ठाure.
*/

काष्ठा blogic_config अणु
	अचिन्हित अक्षर:5;	/* Byte 0 Bits 0-4 */
	bool dma_ch5:1;		/* Byte 0 Bit 5 */
	bool dma_ch6:1;		/* Byte 0 Bit 6 */
	bool dma_ch7:1;		/* Byte 0 Bit 7 */
	bool irq_ch9:1;		/* Byte 1 Bit 0 */
	bool irq_ch10:1;	/* Byte 1 Bit 1 */
	bool irq_ch11:1;	/* Byte 1 Bit 2 */
	bool irq_ch12:1;	/* Byte 1 Bit 3 */
	अचिन्हित अक्षर:1;	/* Byte 1 Bit 4 */
	bool irq_ch14:1;	/* Byte 1 Bit 5 */
	bool irq_ch15:1;	/* Byte 1 Bit 6 */
	अचिन्हित अक्षर:1;	/* Byte 1 Bit 7 */
	अचिन्हित अक्षर id:4;	/* Byte 2 Bits 0-3 */
	अचिन्हित अक्षर:4;	/* Byte 2 Bits 4-7 */
पूर्ण;

/*
  Define the Inquire Setup Inक्रमmation reply काष्ठाure.
*/

काष्ठा blogic_syncval अणु
	अचिन्हित अक्षर offset:4;		/* Bits 0-3 */
	अचिन्हित अक्षर tx_period:3;	/* Bits 4-6 */
	bool sync:1;			/* Bit 7 */
पूर्ण;

काष्ठा blogic_setup_info अणु
	bool sync:1;				/* Byte 0 Bit 0 */
	bool parity:1;				/* Byte 0 Bit 1 */
	अचिन्हित अक्षर:6;			/* Byte 0 Bits 2-7 */
	अचिन्हित अक्षर tx_rate;			/* Byte 1 */
	अचिन्हित अक्षर preempt_समय;		/* Byte 2 */
	अचिन्हित अक्षर समयoff_bus;		/* Byte 3 */
	अचिन्हित अक्षर mbox_count;		/* Byte 4 */
	अचिन्हित अक्षर mbox_addr[3];		/* Bytes 5-7 */
	काष्ठा blogic_syncval sync0to7[8];	/* Bytes 8-15 */
	अचिन्हित अक्षर disconnect_ok0to7;	/* Byte 16 */
	अचिन्हित अक्षर sig;			/* Byte 17 */
	अचिन्हित अक्षर अक्षर_d;			/* Byte 18 */
	अचिन्हित अक्षर bus_type;			/* Byte 19 */
	अचिन्हित अक्षर wide_tx_ok0to7;		/* Byte 20 */
	अचिन्हित अक्षर wide_tx_active0to7;	/* Byte 21 */
	काष्ठा blogic_syncval sync8to15[8];	/* Bytes 22-29 */
	अचिन्हित अक्षर disconnect_ok8to15;	/* Byte 30 */
	अचिन्हित अक्षर:8;			/* Byte 31 */
	अचिन्हित अक्षर wide_tx_ok8to15;		/* Byte 32 */
	अचिन्हित अक्षर wide_tx_active8to15;	/* Byte 33 */
पूर्ण;

/*
  Define the Initialize Extended Mailbox request काष्ठाure.
*/

काष्ठा blogic_exपंचांगbox_req अणु
	अचिन्हित अक्षर mbox_count;	/* Byte 0 */
	u32 base_mbox_addr;		/* Bytes 1-4 */
पूर्ण PACKED;


/*
  Define the Inquire PCI Host Adapter Inक्रमmation reply type.  The ISA
  Compatible I/O Port values are defined here and are also used with
  the Modअगरy I/O Address command.
*/

क्रमागत blogic_isa_ioport अणु
	BLOGIC_IO_330 = 0,
	BLOGIC_IO_334 = 1,
	BLOGIC_IO_230 = 2,
	BLOGIC_IO_234 = 3,
	BLOGIC_IO_130 = 4,
	BLOGIC_IO_134 = 5,
	BLOGIC_IO_DISABLE = 6,
	BLOGIC_IO_DISABLE2 = 7
पूर्ण PACKED;

काष्ठा blogic_adapter_info अणु
	क्रमागत blogic_isa_ioport isa_port;	/* Byte 0 */
	अचिन्हित अक्षर irq_ch;		/* Byte 1 */
	bool low_term:1;		/* Byte 2 Bit 0 */
	bool high_term:1;		/* Byte 2 Bit 1 */
	अचिन्हित अक्षर:2;		/* Byte 2 Bits 2-3 */
	bool JP1:1;			/* Byte 2 Bit 4 */
	bool JP2:1;			/* Byte 2 Bit 5 */
	bool JP3:1;			/* Byte 2 Bit 6 */
	bool genericinfo_valid:1;	/* Byte 2 Bit 7 */
	अचिन्हित अक्षर:8;		/* Byte 3 */
पूर्ण;

/*
  Define the Inquire Extended Setup Inक्रमmation reply काष्ठाure.
*/

काष्ठा blogic_ext_setup अणु
	अचिन्हित अक्षर bus_type;		/* Byte 0 */
	अचिन्हित अक्षर bios_addr;	/* Byte 1 */
	अचिन्हित लघु sg_limit;	/* Bytes 2-3 */
	अचिन्हित अक्षर mbox_count;	/* Byte 4 */
	u32 base_mbox_addr;		/* Bytes 5-8 */
	काष्ठा अणु
		अचिन्हित अक्षर:2;	/* Byte 9 Bits 0-1 */
		bool fast_on_eisa:1;	/* Byte 9 Bit 2 */
		अचिन्हित अक्षर:3;	/* Byte 9 Bits 3-5 */
		bool level_पूर्णांक:1;	/* Byte 9 Bit 6 */
		अचिन्हित अक्षर:1;	/* Byte 9 Bit 7 */
	पूर्ण misc;
	अचिन्हित अक्षर fw_rev[3];	/* Bytes 10-12 */
	bool wide:1;			/* Byte 13 Bit 0 */
	bool dअगरferential:1;		/* Byte 13 Bit 1 */
	bool scam:1;			/* Byte 13 Bit 2 */
	bool ultra:1;			/* Byte 13 Bit 3 */
	bool smart_term:1;		/* Byte 13 Bit 4 */
	अचिन्हित अक्षर:3;		/* Byte 13 Bits 5-7 */
पूर्ण PACKED;

/*
  Define the Enable Strict Round Robin Mode request type.
*/

क्रमागत blogic_rr_req अणु
	BLOGIC_AGGRESSIVE_RR = 0,
	BLOGIC_STRICT_RR_MODE = 1
पूर्ण PACKED;


/*
  Define the Fetch Host Adapter Local RAM request type.
*/

#घोषणा BLOGIC_BIOS_BASE		0
#घोषणा BLOGIC_AUTOSCSI_BASE		64

काष्ठा blogic_fetch_localram अणु
	अचिन्हित अक्षर offset;	/* Byte 0 */
	अचिन्हित अक्षर count;	/* Byte 1 */
पूर्ण;

/*
  Define the Host Adapter Local RAM AutoSCSI काष्ठाure.
*/

काष्ठा blogic_स्वतःscsi अणु
	अचिन्हित अक्षर factory_sig[2];		/* Bytes 0-1 */
	अचिन्हित अक्षर info_bytes;		/* Byte 2 */
	अचिन्हित अक्षर adapter_type[6];		/* Bytes 3-8 */
	अचिन्हित अक्षर:8;			/* Byte 9 */
	bool floppy:1;				/* Byte 10 Bit 0 */
	bool floppy_sec:1;			/* Byte 10 Bit 1 */
	bool level_पूर्णांक:1;			/* Byte 10 Bit 2 */
	अचिन्हित अक्षर:2;			/* Byte 10 Bits 3-4 */
	अचिन्हित अक्षर प्रणालीram_bios:3;		/* Byte 10 Bits 5-7 */
	अचिन्हित अक्षर dma_ch:7;			/* Byte 11 Bits 0-6 */
	bool dma_स्वतःconf:1;			/* Byte 11 Bit 7 */
	अचिन्हित अक्षर irq_ch:7;			/* Byte 12 Bits 0-6 */
	bool irq_स्वतःconf:1;			/* Byte 12 Bit 7 */
	अचिन्हित अक्षर dma_tx_rate;		/* Byte 13 */
	अचिन्हित अक्षर scsi_id;			/* Byte 14 */
	bool low_term:1;			/* Byte 15 Bit 0 */
	bool parity:1;				/* Byte 15 Bit 1 */
	bool high_term:1;			/* Byte 15 Bit 2 */
	bool noisy_cable:1;			/* Byte 15 Bit 3 */
	bool fast_sync_neg:1;			/* Byte 15 Bit 4 */
	bool reset_enabled:1;			/* Byte 15 Bit 5 */
	bool:1;					/* Byte 15 Bit 6 */
	bool active_negation:1;			/* Byte 15 Bit 7 */
	अचिन्हित अक्षर bus_on_delay;		/* Byte 16 */
	अचिन्हित अक्षर bus_off_delay;		/* Byte 17 */
	bool bios_enabled:1;			/* Byte 18 Bit 0 */
	bool पूर्णांक19_redir_enabled:1;		/* Byte 18 Bit 1 */
	bool ext_trans_enable:1;		/* Byte 18 Bit 2 */
	bool removable_as_fixed:1;		/* Byte 18 Bit 3 */
	bool:1;					/* Byte 18 Bit 4 */
	bool morethan2_drives:1;		/* Byte 18 Bit 5 */
	bool bios_पूर्णांक:1;			/* Byte 18 Bit 6 */
	bool floptical:1;			/* Byte 19 Bit 7 */
	अचिन्हित लघु dev_enabled;		/* Bytes 19-20 */
	अचिन्हित लघु wide_ok;			/* Bytes 21-22 */
	अचिन्हित लघु fast_ok;			/* Bytes 23-24 */
	अचिन्हित लघु sync_ok;			/* Bytes 25-26 */
	अचिन्हित लघु discon_ok;		/* Bytes 27-28 */
	अचिन्हित लघु send_start_unit;		/* Bytes 29-30 */
	अचिन्हित लघु ignore_bios_scan;	/* Bytes 31-32 */
	अचिन्हित अक्षर pci_पूर्णांक_pin:2;		/* Byte 33 Bits 0-1 */
	अचिन्हित अक्षर adapter_ioport:2;		/* Byte 33 Bits 2-3 */
	bool strict_rr_enabled:1;		/* Byte 33 Bit 4 */
	bool vesabus_33mhzplus:1;		/* Byte 33 Bit 5 */
	bool vesa_burst_ग_लिखो:1;		/* Byte 33 Bit 6 */
	bool vesa_burst_पढ़ो:1;			/* Byte 33 Bit 7 */
	अचिन्हित लघु ultra_ok;		/* Bytes 34-35 */
	अचिन्हित पूर्णांक:32;			/* Bytes 36-39 */
	अचिन्हित अक्षर:8;			/* Byte 40 */
	अचिन्हित अक्षर स्वतःscsi_maxlun;		/* Byte 41 */
	bool:1;					/* Byte 42 Bit 0 */
	bool scam_करोminant:1;			/* Byte 42 Bit 1 */
	bool scam_enabled:1;			/* Byte 42 Bit 2 */
	bool scam_lev2:1;			/* Byte 42 Bit 3 */
	अचिन्हित अक्षर:4;			/* Byte 42 Bits 4-7 */
	bool पूर्णांक13_exten:1;			/* Byte 43 Bit 0 */
	bool:1;					/* Byte 43 Bit 1 */
	bool cd_boot:1;				/* Byte 43 Bit 2 */
	अचिन्हित अक्षर:5;			/* Byte 43 Bits 3-7 */
	अचिन्हित अक्षर boot_id:4;		/* Byte 44 Bits 0-3 */
	अचिन्हित अक्षर boot_ch:4;		/* Byte 44 Bits 4-7 */
	अचिन्हित अक्षर क्रमce_scan_order:1;	/* Byte 45 Bit 0 */
	अचिन्हित अक्षर:7;			/* Byte 45 Bits 1-7 */
	अचिन्हित लघु nontagged_to_alt_ok;	/* Bytes 46-47 */
	अचिन्हित लघु reneg_sync_on_check;	/* Bytes 48-49 */
	अचिन्हित अक्षर rsvd[10];			/* Bytes 50-59 */
	अचिन्हित अक्षर manuf_diag[2];		/* Bytes 60-61 */
	अचिन्हित लघु cksum;			/* Bytes 62-63 */
पूर्ण PACKED;

/*
  Define the Host Adapter Local RAM Auto SCSI Byte 45 काष्ठाure.
*/

काष्ठा blogic_स्वतःscsi_byte45 अणु
	अचिन्हित अक्षर क्रमce_scan_order:1;	/* Bit 0 */
	अचिन्हित अक्षर:7;	/* Bits 1-7 */
पूर्ण;

/*
  Define the Host Adapter Local RAM BIOS Drive Map Byte काष्ठाure.
*/

#घोषणा BLOGIC_BIOS_DRVMAP		17

काष्ठा blogic_bios_drvmap अणु
	अचिन्हित अक्षर tgt_idbit3:1;			/* Bit 0 */
	अचिन्हित अक्षर:2;				/* Bits 1-2 */
	क्रमागत blogic_bios_diskgeometry diskgeom:2;	/* Bits 3-4 */
	अचिन्हित अक्षर tgt_id:3;				/* Bits 5-7 */
पूर्ण;

/*
  Define the Set CCB Format request type.  Extended LUN Format CCBs are
  necessary to support more than 8 Logical Units per Target Device.
*/

क्रमागत blogic_setccb_fmt अणु
	BLOGIC_LEGACY_LUN_CCB = 0,
	BLOGIC_EXT_LUN_CCB = 1
पूर्ण PACKED;

/*
  Define the Outgoing Mailbox Action Codes.
*/

क्रमागत blogic_action अणु
	BLOGIC_OUTBOX_FREE = 0x00,
	BLOGIC_MBOX_START = 0x01,
	BLOGIC_MBOX_ABORT = 0x02
पूर्ण PACKED;


/*
  Define the Incoming Mailbox Completion Codes.  The MultiMaster Firmware
  only uses codes 0 - 4.  The FlashPoपूर्णांक SCCB Manager has no mailboxes, so
  completion codes are stored in the CCB; it only uses codes 1, 2, 4, and 5.
*/

क्रमागत blogic_cmplt_code अणु
	BLOGIC_INBOX_FREE = 0x00,
	BLOGIC_CMD_COMPLETE_GOOD = 0x01,
	BLOGIC_CMD_ABORT_BY_HOST = 0x02,
	BLOGIC_CMD_NOTFOUND = 0x03,
	BLOGIC_CMD_COMPLETE_ERROR = 0x04,
	BLOGIC_INVALID_CCB = 0x05
पूर्ण PACKED;

/*
  Define the Command Control Block (CCB) Opcodes.
*/

क्रमागत blogic_ccb_opcode अणु
	BLOGIC_INITIATOR_CCB = 0x00,
	BLOGIC_TGT_CCB = 0x01,
	BLOGIC_INITIATOR_CCB_SG = 0x02,
	BLOGIC_INITIATOR_CCBB_RESIDUAL = 0x03,
	BLOGIC_INITIATOR_CCB_SG_RESIDUAL = 0x04,
	BLOGIC_BDR = 0x81
पूर्ण PACKED;


/*
  Define the CCB Data Direction Codes.
*/

क्रमागत blogic_datadir अणु
	BLOGIC_UNCHECKED_TX = 0,
	BLOGIC_DATAIN_CHECKED = 1,
	BLOGIC_DATAOUT_CHECKED = 2,
	BLOGIC_NOTX = 3
पूर्ण;


/*
  Define the Host Adapter Status Codes.  The MultiMaster Firmware करोes not
  वापस status code 0x0C; it uses 0x12 क्रम both overruns and underruns.
*/

क्रमागत blogic_adapter_status अणु
	BLOGIC_CMD_CMPLT_NORMAL = 0x00,
	BLOGIC_LINK_CMD_CMPLT = 0x0A,
	BLOGIC_LINK_CMD_CMPLT_FLAG = 0x0B,
	BLOGIC_DATA_UNDERRUN = 0x0C,
	BLOGIC_SELECT_TIMEOUT = 0x11,
	BLOGIC_DATA_OVERRUN = 0x12,
	BLOGIC_NOEXPECT_BUSFREE = 0x13,
	BLOGIC_INVALID_BUSPHASE = 0x14,
	BLOGIC_INVALID_OUTBOX_CODE = 0x15,
	BLOGIC_INVALID_CMD_CODE = 0x16,
	BLOGIC_LINKCCB_BADLUN = 0x17,
	BLOGIC_BAD_CMD_PARAM = 0x1A,
	BLOGIC_AUTOREQSENSE_FAIL = 0x1B,
	BLOGIC_TAGQUEUE_REJECT = 0x1C,
	BLOGIC_BAD_MSG_RCVD = 0x1D,
	BLOGIC_HW_FAIL = 0x20,
	BLOGIC_NORESPONSE_TO_ATN = 0x21,
	BLOGIC_HW_RESET = 0x22,
	BLOGIC_RST_FROM_OTHERDEV = 0x23,
	BLOGIC_BAD_RECONNECT = 0x24,
	BLOGIC_HW_BDR = 0x25,
	BLOGIC_ABRT_QUEUE = 0x26,
	BLOGIC_ADAPTER_SW_ERROR = 0x27,
	BLOGIC_HW_TIMEOUT = 0x30,
	BLOGIC_PARITY_ERR = 0x34
पूर्ण PACKED;


/*
  Define the SCSI Target Device Status Codes.
*/

क्रमागत blogic_tgt_status अणु
	BLOGIC_OP_GOOD = 0x00,
	BLOGIC_CHECKCONDITION = 0x02,
	BLOGIC_DEVBUSY = 0x08
पूर्ण PACKED;

/*
  Define the Queue Tag Codes.
*/

क्रमागत blogic_queuetag अणु
	BLOGIC_SIMPLETAG = 0,
	BLOGIC_HEADTAG = 1,
	BLOGIC_ORDEREDTAG = 2,
	BLOGIC_RSVDTAG = 3
पूर्ण;

/*
  Define the SCSI Command Descriptor Block (CDB).
*/

#घोषणा BLOGIC_CDB_MAXLEN			12


/*
  Define the Scatter/Gather Segment काष्ठाure required by the MultiMaster
  Firmware Interface and the FlashPoपूर्णांक SCCB Manager.
*/

काष्ठा blogic_sg_seg अणु
	u32 segbytes;	/* Bytes 0-3 */
	u32 segdata;	/* Bytes 4-7 */
पूर्ण;

/*
  Define the Driver CCB Status Codes.
*/

क्रमागत blogic_ccb_status अणु
	BLOGIC_CCB_FREE = 0,
	BLOGIC_CCB_ACTIVE = 1,
	BLOGIC_CCB_COMPLETE = 2,
	BLOGIC_CCB_RESET = 3
पूर्ण PACKED;


/*
  Define the 32 Bit Mode Command Control Block (CCB) काष्ठाure.  The first 40
  bytes are defined by and common to both the MultiMaster Firmware and the
  FlashPoपूर्णांक SCCB Manager.  The next 60 bytes are defined by the FlashPoपूर्णांक
  SCCB Manager.  The reमुख्यing components are defined by the Linux BusLogic
  Driver.  Extended LUN Format CCBs dअगरfer from Legacy LUN Format 32 Bit Mode
  CCBs only in having the TagEnable and QueueTag fields moved from byte 17 to
  byte 1, and the Logical Unit field in byte 17 expanded to 6 bits.  In theory,
  Extended LUN Format CCBs can support up to 64 Logical Units, but in practice
  many devices will respond improperly to Logical Units between 32 and 63, and
  the SCSI-2 specअगरication defines Bit 5 as LUNTAR.  Extended LUN Format CCBs
  are used by recent versions of the MultiMaster Firmware, as well as by the
  FlashPoपूर्णांक SCCB Manager; the FlashPoपूर्णांक SCCB Manager only supports 32 Logical
  Units.  Since 64 Logical Units are unlikely to be needed in practice, and
  since they are problematic क्रम the above reasons, and since limiting them to
  5 bits simplअगरies the CCB काष्ठाure definition, this driver only supports
  32 Logical Units per Target Device.
*/

काष्ठा blogic_ccb अणु
	/*
	   MultiMaster Firmware and FlashPoपूर्णांक SCCB Manager Common Portion.
	 */
	क्रमागत blogic_ccb_opcode opcode;			/* Byte 0 */
	अचिन्हित अक्षर:3;				/* Byte 1 Bits 0-2 */
	क्रमागत blogic_datadir datadir:2;			/* Byte 1 Bits 3-4 */
	bool tag_enable:1;				/* Byte 1 Bit 5 */
	क्रमागत blogic_queuetag queuetag:2;		/* Byte 1 Bits 6-7 */
	अचिन्हित अक्षर cdblen;				/* Byte 2 */
	अचिन्हित अक्षर sense_datalen;			/* Byte 3 */
	u32 datalen;					/* Bytes 4-7 */
	u32 data;					/* Bytes 8-11 */
	अचिन्हित अक्षर:8;				/* Byte 12 */
	अचिन्हित अक्षर:8;				/* Byte 13 */
	क्रमागत blogic_adapter_status adapter_status;	/* Byte 14 */
	क्रमागत blogic_tgt_status tgt_status;		/* Byte 15 */
	अचिन्हित अक्षर tgt_id;				/* Byte 16 */
	अचिन्हित अक्षर lun:5;				/* Byte 17 Bits 0-4 */
	bool legacytag_enable:1;			/* Byte 17 Bit 5 */
	क्रमागत blogic_queuetag legacy_tag:2;		/* Byte 17 Bits 6-7 */
	अचिन्हित अक्षर cdb[BLOGIC_CDB_MAXLEN];		/* Bytes 18-29 */
	अचिन्हित अक्षर:8;				/* Byte 30 */
	अचिन्हित अक्षर:8;				/* Byte 31 */
	u32 rsvd_पूर्णांक;					/* Bytes 32-35 */
	u32 sensedata;					/* Bytes 36-39 */
	/*
	   FlashPoपूर्णांक SCCB Manager Defined Portion.
	 */
	व्योम (*callback) (काष्ठा blogic_ccb *);		/* Bytes 40-43 */
	u32 base_addr;					/* Bytes 44-47 */
	क्रमागत blogic_cmplt_code comp_code;		/* Byte 48 */
#अगर_घोषित CONFIG_SCSI_FLASHPOINT
	अचिन्हित अक्षर:8;				/* Byte 49 */
	u16 os_flags;					/* Bytes 50-51 */
	अचिन्हित अक्षर निजी[24];			/* Bytes 52-99 */
	व्योम *rsvd1;
	व्योम *rsvd2;
	अचिन्हित अक्षर निजी2[16];
#पूर्ण_अगर
	/*
	   BusLogic Linux Driver Defined Portion.
	 */
	dma_addr_t allocgrp_head;
	अचिन्हित पूर्णांक allocgrp_size;
	u32 dma_handle;
	क्रमागत blogic_ccb_status status;
	अचिन्हित दीर्घ serial;
	काष्ठा scsi_cmnd *command;
	काष्ठा blogic_adapter *adapter;
	काष्ठा blogic_ccb *next;
	काष्ठा blogic_ccb *next_all;
	काष्ठा blogic_sg_seg sglist[BLOGIC_SG_LIMIT];
पूर्ण;

/*
  Define the 32 Bit Mode Outgoing Mailbox काष्ठाure.
*/

काष्ठा blogic_outbox अणु
	u32 ccb;			/* Bytes 0-3 */
	u32:24;				/* Bytes 4-6 */
	क्रमागत blogic_action action;	/* Byte 7 */
पूर्ण;

/*
  Define the 32 Bit Mode Incoming Mailbox काष्ठाure.
*/

काष्ठा blogic_inbox अणु
	u32 ccb;					/* Bytes 0-3 */
	क्रमागत blogic_adapter_status adapter_status;	/* Byte 4 */
	क्रमागत blogic_tgt_status tgt_status;		/* Byte 5 */
	अचिन्हित अक्षर:8;				/* Byte 6 */
	क्रमागत blogic_cmplt_code comp_code;		/* Byte 7 */
पूर्ण;


/*
  Define the BusLogic Driver Options काष्ठाure.
*/

काष्ठा blogic_drvr_options अणु
	अचिन्हित लघु tagq_ok;
	अचिन्हित लघु tagq_ok_mask;
	अचिन्हित लघु bus_settle_समय;
	अचिन्हित लघु stop_tgt_inquiry;
	अचिन्हित अक्षर common_qdepth;
	अचिन्हित अक्षर qdepth[BLOGIC_MAXDEV];
पूर्ण;

/*
  Define the Host Adapter Target Flags काष्ठाure.
*/

काष्ठा blogic_tgt_flags अणु
	bool tgt_exists:1;
	bool tagq_ok:1;
	bool wide_ok:1;
	bool tagq_active:1;
	bool wide_active:1;
	bool cmd_good:1;
	bool tgt_info_in:1;
पूर्ण;

/*
  Define the Host Adapter Target Statistics काष्ठाure.
*/

#घोषणा BLOGIC_SZ_BUCKETS			10

काष्ठा blogic_tgt_stats अणु
	अचिन्हित पूर्णांक cmds_tried;
	अचिन्हित पूर्णांक cmds_complete;
	अचिन्हित पूर्णांक पढ़ो_cmds;
	अचिन्हित पूर्णांक ग_लिखो_cmds;
	काष्ठा blogic_byte_count bytesपढ़ो;
	काष्ठा blogic_byte_count byteswritten;
	अचिन्हित पूर्णांक पढ़ो_sz_buckets[BLOGIC_SZ_BUCKETS];
	अचिन्हित पूर्णांक ग_लिखो_sz_buckets[BLOGIC_SZ_BUCKETS];
	अचिन्हित लघु पातs_request;
	अचिन्हित लघु पातs_tried;
	अचिन्हित लघु पातs_करोne;
	अचिन्हित लघु bdr_request;
	अचिन्हित लघु bdr_tried;
	अचिन्हित लघु bdr_करोne;
	अचिन्हित लघु adapter_reset_req;
	अचिन्हित लघु adapter_reset_attempt;
	अचिन्हित लघु adapter_reset_करोne;
पूर्ण;

/*
  Define the FlashPoपूर्णांक Card Handle data type.
*/

#घोषणा FPOINT_BADCARD_HANDLE		0xFFFFFFFFL


/*
  Define the FlashPoपूर्णांक Inक्रमmation काष्ठाure.  This काष्ठाure is defined
  by the FlashPoपूर्णांक SCCB Manager.
*/

काष्ठा fpoपूर्णांक_info अणु
	u32 base_addr;				/* Bytes 0-3 */
	bool present;				/* Byte 4 */
	अचिन्हित अक्षर irq_ch;			/* Byte 5 */
	अचिन्हित अक्षर scsi_id;			/* Byte 6 */
	अचिन्हित अक्षर scsi_lun;			/* Byte 7 */
	u16 fw_rev;				/* Bytes 8-9 */
	u16 sync_ok;				/* Bytes 10-11 */
	u16 fast_ok;				/* Bytes 12-13 */
	u16 ultra_ok;				/* Bytes 14-15 */
	u16 discon_ok;				/* Bytes 16-17 */
	u16 wide_ok;				/* Bytes 18-19 */
	bool parity:1;				/* Byte 20 Bit 0 */
	bool wide:1;				/* Byte 20 Bit 1 */
	bool softreset:1;			/* Byte 20 Bit 2 */
	bool ext_trans_enable:1;		/* Byte 20 Bit 3 */
	bool low_term:1;			/* Byte 20 Bit 4 */
	bool high_term:1;			/* Byte 20 Bit 5 */
	bool report_underrun:1;			/* Byte 20 Bit 6 */
	bool scam_enabled:1;			/* Byte 20 Bit 7 */
	bool scam_lev2:1;			/* Byte 21 Bit 0 */
	अचिन्हित अक्षर:7;			/* Byte 21 Bits 1-7 */
	अचिन्हित अक्षर family;			/* Byte 22 */
	अचिन्हित अक्षर bus_type;			/* Byte 23 */
	अचिन्हित अक्षर model[3];			/* Bytes 24-26 */
	अचिन्हित अक्षर relative_cardnum;		/* Byte 27 */
	अचिन्हित अक्षर rsvd[4];			/* Bytes 28-31 */
	u32 os_rsvd;				/* Bytes 32-35 */
	अचिन्हित अक्षर translation_info[4];	/* Bytes 36-39 */
	u32 rsvd2[5];				/* Bytes 40-59 */
	u32 sec_range;				/* Bytes 60-63 */
पूर्ण;

/*
  Define the BusLogic Driver Host Adapter काष्ठाure.
*/

काष्ठा blogic_adapter अणु
	काष्ठा Scsi_Host *scsi_host;
	काष्ठा pci_dev *pci_device;
	क्रमागत blogic_adapter_type adapter_type;
	क्रमागत blogic_adapter_bus_type adapter_bus_type;
	अचिन्हित दीर्घ io_addr;
	अचिन्हित दीर्घ pci_addr;
	अचिन्हित लघु addr_count;
	अचिन्हित अक्षर host_no;
	अचिन्हित अक्षर model[9];
	अचिन्हित अक्षर fw_ver[6];
	अचिन्हित अक्षर full_model[18];
	अचिन्हित अक्षर bus;
	अचिन्हित अक्षर dev;
	अचिन्हित अक्षर irq_ch;
	अचिन्हित अक्षर scsi_id;
	bool irq_acquired:1;
	bool ext_trans_enable:1;
	bool parity:1;
	bool reset_enabled:1;
	bool level_पूर्णांक:1;
	bool wide:1;
	bool dअगरferential:1;
	bool scam:1;
	bool ultra:1;
	bool ext_lun:1;
	bool terminfo_valid:1;
	bool low_term:1;
	bool high_term:1;
	bool strict_rr:1;
	bool scam_enabled:1;
	bool scam_lev2:1;
	bool adapter_initd:1;
	bool adapter_extreset:1;
	bool adapter_पूर्णांकern_err:1;
	bool processing_ccbs;
	अस्थिर bool adapter_cmd_complete;
	अचिन्हित लघु adapter_sglimit;
	अचिन्हित लघु drvr_sglimit;
	अचिन्हित लघु maxdev;
	अचिन्हित लघु maxlun;
	अचिन्हित लघु mbox_count;
	अचिन्हित लघु initccbs;
	अचिन्हित लघु inc_ccbs;
	अचिन्हित लघु alloc_ccbs;
	अचिन्हित लघु drvr_qdepth;
	अचिन्हित लघु adapter_qdepth;
	अचिन्हित लघु untag_qdepth;
	अचिन्हित लघु common_qdepth;
	अचिन्हित लघु bus_settle_समय;
	अचिन्हित लघु sync_ok;
	अचिन्हित लघु fast_ok;
	अचिन्हित लघु ultra_ok;
	अचिन्हित लघु wide_ok;
	अचिन्हित लघु discon_ok;
	अचिन्हित लघु tagq_ok;
	अचिन्हित लघु ext_resets;
	अचिन्हित लघु adapter_पूर्णांकern_errors;
	अचिन्हित लघु tgt_count;
	अचिन्हित लघु msgbuflen;
	u32 bios_addr;
	काष्ठा blogic_drvr_options *drvr_opts;
	काष्ठा fpoपूर्णांक_info fpinfo;
	व्योम *cardhandle;
	काष्ठा list_head host_list;
	काष्ठा blogic_ccb *all_ccbs;
	काष्ठा blogic_ccb *मुक्त_ccbs;
	काष्ठा blogic_ccb *firstccb;
	काष्ठा blogic_ccb *lastccb;
	काष्ठा blogic_ccb *bdr_pend[BLOGIC_MAXDEV];
	काष्ठा blogic_tgt_flags tgt_flags[BLOGIC_MAXDEV];
	अचिन्हित अक्षर qdepth[BLOGIC_MAXDEV];
	अचिन्हित अक्षर sync_period[BLOGIC_MAXDEV];
	अचिन्हित अक्षर sync_offset[BLOGIC_MAXDEV];
	अचिन्हित अक्षर active_cmds[BLOGIC_MAXDEV];
	अचिन्हित पूर्णांक cmds_since_rst[BLOGIC_MAXDEV];
	अचिन्हित दीर्घ last_seqpoपूर्णांक[BLOGIC_MAXDEV];
	अचिन्हित दीर्घ last_resettried[BLOGIC_MAXDEV];
	अचिन्हित दीर्घ last_resetकरोne[BLOGIC_MAXDEV];
	काष्ठा blogic_outbox *first_outbox;
	काष्ठा blogic_outbox *last_outbox;
	काष्ठा blogic_outbox *next_outbox;
	काष्ठा blogic_inbox *first_inbox;
	काष्ठा blogic_inbox *last_inbox;
	काष्ठा blogic_inbox *next_inbox;
	काष्ठा blogic_tgt_stats tgt_stats[BLOGIC_MAXDEV];
	अचिन्हित अक्षर *mbox_space;
	dma_addr_t mbox_space_handle;
	अचिन्हित पूर्णांक mbox_sz;
	अचिन्हित दीर्घ ccb_offset;
	अक्षर msgbuf[BLOGIC_MSGBUF_SIZE];
पूर्ण;

/*
  Define a काष्ठाure क्रम the BIOS Disk Parameters.
*/

काष्ठा bios_diskparam अणु
	पूर्णांक heads;
	पूर्णांक sectors;
	पूर्णांक cylinders;
पूर्ण;

/*
  Define a काष्ठाure क्रम the SCSI Inquiry command results.
*/

काष्ठा scsi_inquiry अणु
	अचिन्हित अक्षर devtype:5;	/* Byte 0 Bits 0-4 */
	अचिन्हित अक्षर dev_qual:3;	/* Byte 0 Bits 5-7 */
	अचिन्हित अक्षर dev_modअगरier:7;	/* Byte 1 Bits 0-6 */
	bool rmb:1;			/* Byte 1 Bit 7 */
	अचिन्हित अक्षर ansi_ver:3;	/* Byte 2 Bits 0-2 */
	अचिन्हित अक्षर ecma_ver:3;	/* Byte 2 Bits 3-5 */
	अचिन्हित अक्षर iso_ver:2;	/* Byte 2 Bits 6-7 */
	अचिन्हित अक्षर resp_fmt:4;	/* Byte 3 Bits 0-3 */
	अचिन्हित अक्षर:2;		/* Byte 3 Bits 4-5 */
	bool TrmIOP:1;			/* Byte 3 Bit 6 */
	bool AENC:1;			/* Byte 3 Bit 7 */
	अचिन्हित अक्षर addl_len;		/* Byte 4 */
	अचिन्हित अक्षर:8;		/* Byte 5 */
	अचिन्हित अक्षर:8;		/* Byte 6 */
	bool SftRe:1;			/* Byte 7 Bit 0 */
	bool CmdQue:1;			/* Byte 7 Bit 1 */
	bool:1;				/* Byte 7 Bit 2 */
	bool linked:1;			/* Byte 7 Bit 3 */
	bool sync:1;			/* Byte 7 Bit 4 */
	bool WBus16:1;			/* Byte 7 Bit 5 */
	bool WBus32:1;			/* Byte 7 Bit 6 */
	bool RelAdr:1;			/* Byte 7 Bit 7 */
	अचिन्हित अक्षर venकरोr[8];	/* Bytes 8-15 */
	अचिन्हित अक्षर product[16];	/* Bytes 16-31 */
	अचिन्हित अक्षर product_rev[4];	/* Bytes 32-35 */
पूर्ण;


/*
  Define functions to provide an असलtraction क्रम पढ़ोing and writing the
  Host Adapter I/O Registers.
*/

अटल अंतरभूत व्योम blogic_busreset(काष्ठा blogic_adapter *adapter)
अणु
	जोड़ blogic_cntrl_reg cr;
	cr.all = 0;
	cr.cr.bus_reset = true;
	outb(cr.all, adapter->io_addr + BLOGIC_CNTRL_REG);
पूर्ण

अटल अंतरभूत व्योम blogic_पूर्णांकreset(काष्ठा blogic_adapter *adapter)
अणु
	जोड़ blogic_cntrl_reg cr;
	cr.all = 0;
	cr.cr.पूर्णांक_reset = true;
	outb(cr.all, adapter->io_addr + BLOGIC_CNTRL_REG);
पूर्ण

अटल अंतरभूत व्योम blogic_softreset(काष्ठा blogic_adapter *adapter)
अणु
	जोड़ blogic_cntrl_reg cr;
	cr.all = 0;
	cr.cr.soft_reset = true;
	outb(cr.all, adapter->io_addr + BLOGIC_CNTRL_REG);
पूर्ण

अटल अंतरभूत व्योम blogic_hardreset(काष्ठा blogic_adapter *adapter)
अणु
	जोड़ blogic_cntrl_reg cr;
	cr.all = 0;
	cr.cr.hard_reset = true;
	outb(cr.all, adapter->io_addr + BLOGIC_CNTRL_REG);
पूर्ण

अटल अंतरभूत अचिन्हित अक्षर blogic_rdstatus(काष्ठा blogic_adapter *adapter)
अणु
	वापस inb(adapter->io_addr + BLOGIC_STATUS_REG);
पूर्ण

अटल अंतरभूत व्योम blogic_setcmdparam(काष्ठा blogic_adapter *adapter,
					अचिन्हित अक्षर value)
अणु
	outb(value, adapter->io_addr + BLOGIC_CMD_PARM_REG);
पूर्ण

अटल अंतरभूत अचिन्हित अक्षर blogic_rddatain(काष्ठा blogic_adapter *adapter)
अणु
	वापस inb(adapter->io_addr + BLOGIC_DATAIN_REG);
पूर्ण

अटल अंतरभूत अचिन्हित अक्षर blogic_rdपूर्णांक(काष्ठा blogic_adapter *adapter)
अणु
	वापस inb(adapter->io_addr + BLOGIC_INT_REG);
पूर्ण

अटल अंतरभूत अचिन्हित अक्षर blogic_rdgeom(काष्ठा blogic_adapter *adapter)
अणु
	वापस inb(adapter->io_addr + BLOGIC_GEOMETRY_REG);
पूर्ण

/*
  blogic_execmbox issues an Execute Mailbox Command, which
  notअगरies the Host Adapter that an entry has been made in an Outgoing
  Mailbox.
*/

अटल अंतरभूत व्योम blogic_execmbox(काष्ठा blogic_adapter *adapter)
अणु
	blogic_setcmdparam(adapter, BLOGIC_EXEC_MBOX_CMD);
पूर्ण

/*
  blogic_delay रुकोs क्रम Seconds to elapse.
*/

अटल अंतरभूत व्योम blogic_delay(पूर्णांक seconds)
अणु
	mdelay(1000 * seconds);
पूर्ण

/*
  virt_to_32bit_virt maps between Kernel Virtual Addresses and
  32 bit Kernel Virtual Addresses.  This aव्योमs compilation warnings
  on 64 bit architectures.
*/

अटल अंतरभूत u32 virt_to_32bit_virt(व्योम *virt_addr)
अणु
	वापस (u32) (अचिन्हित दीर्घ) virt_addr;
पूर्ण

/*
  blogic_inc_count increments counter by 1, stopping at
  65535 rather than wrapping around to 0.
*/

अटल अंतरभूत व्योम blogic_inc_count(अचिन्हित लघु *count)
अणु
	अगर (*count < 65535)
		(*count)++;
पूर्ण

/*
  blogic_addcount increments Byte Counter by Amount.
*/

अटल अंतरभूत व्योम blogic_addcount(काष्ठा blogic_byte_count *bytecount,
					अचिन्हित पूर्णांक amount)
अणु
	bytecount->units += amount;
	अगर (bytecount->units > 999999999) अणु
		bytecount->units -= 1000000000;
		bytecount->billions++;
	पूर्ण
पूर्ण

/*
  blogic_incszbucket increments the Bucket क्रम Amount.
*/

अटल अंतरभूत व्योम blogic_incszbucket(अचिन्हित पूर्णांक *cmdsz_buckets,
					अचिन्हित पूर्णांक amount)
अणु
	पूर्णांक index = 0;
	अगर (amount < 8 * 1024) अणु
		अगर (amount < 2 * 1024)
			index = (amount < 1 * 1024 ? 0 : 1);
		अन्यथा
			index = (amount < 4 * 1024 ? 2 : 3);
	पूर्ण अन्यथा अगर (amount < 128 * 1024) अणु
		अगर (amount < 32 * 1024)
			index = (amount < 16 * 1024 ? 4 : 5);
		अन्यथा
			index = (amount < 64 * 1024 ? 6 : 7);
	पूर्ण अन्यथा
		index = (amount < 256 * 1024 ? 8 : 9);
	cmdsz_buckets[index]++;
पूर्ण

/*
  Define the version number of the FlashPoपूर्णांक Firmware (SCCB Manager).
*/

#घोषणा FLASHPOINT_FW_VER		"5.02"

/*
  Define the possible वापस values from FlashPoपूर्णांक_HandleInterrupt.
*/

#घोषणा FPOINT_NORMAL_INT		0x00
#घोषणा FPOINT_INTERN_ERR		0xFE
#घोषणा FPOINT_EXT_RESET		0xFF

/*
  Define prototypes क्रम the क्रमward referenced BusLogic Driver
  Internal Functions.
*/

अटल स्थिर अक्षर *blogic_drvr_info(काष्ठा Scsi_Host *);
अटल पूर्णांक blogic_qcmd(काष्ठा Scsi_Host *h, काष्ठा scsi_cmnd *);
अटल पूर्णांक blogic_diskparam(काष्ठा scsi_device *, काष्ठा block_device *, sector_t, पूर्णांक *);
अटल पूर्णांक blogic_slaveconfig(काष्ठा scsi_device *);
अटल व्योम blogic_qcompleted_ccb(काष्ठा blogic_ccb *);
अटल irqवापस_t blogic_पूर्णांकhandler(पूर्णांक, व्योम *);
अटल पूर्णांक blogic_resetadapter(काष्ठा blogic_adapter *, bool hard_reset);
अटल व्योम blogic_msg(क्रमागत blogic_msglevel, अक्षर *, काष्ठा blogic_adapter *, ...);
अटल पूर्णांक __init blogic_setup(अक्षर *);

#पूर्ण_अगर				/* _BUSLOGIC_H */
