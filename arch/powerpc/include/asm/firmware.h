<शैली गुरु>
/* SPDX-License-Identअगरier: GPL-2.0-or-later */
/*
 *  Copyright (C) 2001 Ben. Herrenschmidt (benh@kernel.crashing.org)
 *
 *  Modअगरications क्रम ppc64:
 *      Copyright (C) 2003 Dave Engebretsen <engebret@us.ibm.com>
 */
#अगर_अघोषित __ASM_POWERPC_FIRMWARE_H
#घोषणा __ASM_POWERPC_FIRMWARE_H

#अगर_घोषित __KERNEL__

#समावेश <यंत्र/यंत्र-स्थिर.h>

/* firmware feature biपंचांगask values */

#घोषणा FW_FEATURE_PFT		ASM_CONST(0x0000000000000001)
#घोषणा FW_FEATURE_TCE		ASM_CONST(0x0000000000000002)
#घोषणा FW_FEATURE_SPRG0	ASM_CONST(0x0000000000000004)
#घोषणा FW_FEATURE_DABR		ASM_CONST(0x0000000000000008)
#घोषणा FW_FEATURE_COPY		ASM_CONST(0x0000000000000010)
#घोषणा FW_FEATURE_ASR		ASM_CONST(0x0000000000000020)
#घोषणा FW_FEATURE_DEBUG	ASM_CONST(0x0000000000000040)
#घोषणा FW_FEATURE_TERM		ASM_CONST(0x0000000000000080)
#घोषणा FW_FEATURE_PERF		ASM_CONST(0x0000000000000100)
#घोषणा FW_FEATURE_DUMP		ASM_CONST(0x0000000000000200)
#घोषणा FW_FEATURE_INTERRUPT	ASM_CONST(0x0000000000000400)
#घोषणा FW_FEATURE_MIGRATE	ASM_CONST(0x0000000000000800)
#घोषणा FW_FEATURE_PERFMON	ASM_CONST(0x0000000000001000)
#घोषणा FW_FEATURE_CRQ		ASM_CONST(0x0000000000002000)
#घोषणा FW_FEATURE_VIO		ASM_CONST(0x0000000000004000)
#घोषणा FW_FEATURE_RDMA		ASM_CONST(0x0000000000008000)
#घोषणा FW_FEATURE_LLAN		ASM_CONST(0x0000000000010000)
#घोषणा FW_FEATURE_BULK_REMOVE	ASM_CONST(0x0000000000020000)
#घोषणा FW_FEATURE_XDABR	ASM_CONST(0x0000000000040000)
#घोषणा FW_FEATURE_PUT_TCE_IND	ASM_CONST(0x0000000000080000)
#घोषणा FW_FEATURE_SPLPAR	ASM_CONST(0x0000000000100000)
#घोषणा FW_FEATURE_LPAR		ASM_CONST(0x0000000000400000)
#घोषणा FW_FEATURE_PS3_LV1	ASM_CONST(0x0000000000800000)
#घोषणा FW_FEATURE_HPT_RESIZE	ASM_CONST(0x0000000001000000)
#घोषणा FW_FEATURE_CMO		ASM_CONST(0x0000000002000000)
#घोषणा FW_FEATURE_VPHN		ASM_CONST(0x0000000004000000)
#घोषणा FW_FEATURE_XCMO		ASM_CONST(0x0000000008000000)
#घोषणा FW_FEATURE_OPAL		ASM_CONST(0x0000000010000000)
#घोषणा FW_FEATURE_SET_MODE	ASM_CONST(0x0000000040000000)
#घोषणा FW_FEATURE_BEST_ENERGY	ASM_CONST(0x0000000080000000)
#घोषणा FW_FEATURE_TYPE1_AFFINITY ASM_CONST(0x0000000100000000)
#घोषणा FW_FEATURE_PRRN		ASM_CONST(0x0000000200000000)
#घोषणा FW_FEATURE_DRMEM_V2	ASM_CONST(0x0000000400000000)
#घोषणा FW_FEATURE_DRC_INFO	ASM_CONST(0x0000000800000000)
#घोषणा FW_FEATURE_BLOCK_REMOVE ASM_CONST(0x0000001000000000)
#घोषणा FW_FEATURE_PAPR_SCM 	ASM_CONST(0x0000002000000000)
#घोषणा FW_FEATURE_ULTRAVISOR	ASM_CONST(0x0000004000000000)
#घोषणा FW_FEATURE_STUFF_TCE	ASM_CONST(0x0000008000000000)
#घोषणा FW_FEATURE_RPT_INVALIDATE ASM_CONST(0x0000010000000000)

#अगर_अघोषित __ASSEMBLY__

क्रमागत अणु
#अगर_घोषित CONFIG_PPC64
	FW_FEATURE_PSERIES_POSSIBLE = FW_FEATURE_PFT | FW_FEATURE_TCE |
		FW_FEATURE_SPRG0 | FW_FEATURE_DABR | FW_FEATURE_COPY |
		FW_FEATURE_ASR | FW_FEATURE_DEBUG | FW_FEATURE_TERM |
		FW_FEATURE_PERF | FW_FEATURE_DUMP | FW_FEATURE_INTERRUPT |
		FW_FEATURE_MIGRATE | FW_FEATURE_PERFMON | FW_FEATURE_CRQ |
		FW_FEATURE_VIO | FW_FEATURE_RDMA | FW_FEATURE_LLAN |
		FW_FEATURE_BULK_REMOVE | FW_FEATURE_XDABR |
		FW_FEATURE_PUT_TCE_IND | FW_FEATURE_STUFF_TCE |
		FW_FEATURE_SPLPAR | FW_FEATURE_LPAR |
		FW_FEATURE_CMO | FW_FEATURE_VPHN | FW_FEATURE_XCMO |
		FW_FEATURE_SET_MODE | FW_FEATURE_BEST_ENERGY |
		FW_FEATURE_TYPE1_AFFINITY | FW_FEATURE_PRRN |
		FW_FEATURE_HPT_RESIZE | FW_FEATURE_DRMEM_V2 |
		FW_FEATURE_DRC_INFO | FW_FEATURE_BLOCK_REMOVE |
		FW_FEATURE_PAPR_SCM | FW_FEATURE_ULTRAVISOR |
		FW_FEATURE_RPT_INVALIDATE,
	FW_FEATURE_PSERIES_ALWAYS = 0,
	FW_FEATURE_POWERNV_POSSIBLE = FW_FEATURE_OPAL | FW_FEATURE_ULTRAVISOR,
	FW_FEATURE_POWERNV_ALWAYS = 0,
	FW_FEATURE_PS3_POSSIBLE = FW_FEATURE_LPAR | FW_FEATURE_PS3_LV1,
	FW_FEATURE_PS3_ALWAYS = FW_FEATURE_LPAR | FW_FEATURE_PS3_LV1,
	FW_FEATURE_NATIVE_POSSIBLE = 0,
	FW_FEATURE_NATIVE_ALWAYS = 0,
	FW_FEATURE_POSSIBLE =
#अगर_घोषित CONFIG_PPC_PSERIES
		FW_FEATURE_PSERIES_POSSIBLE |
#पूर्ण_अगर
#अगर_घोषित CONFIG_PPC_POWERNV
		FW_FEATURE_POWERNV_POSSIBLE |
#पूर्ण_अगर
#अगर_घोषित CONFIG_PPC_PS3
		FW_FEATURE_PS3_POSSIBLE |
#पूर्ण_अगर
#अगर_घोषित CONFIG_PPC_NATIVE
		FW_FEATURE_NATIVE_ALWAYS |
#पूर्ण_अगर
		0,
	FW_FEATURE_ALWAYS =
#अगर_घोषित CONFIG_PPC_PSERIES
		FW_FEATURE_PSERIES_ALWAYS &
#पूर्ण_अगर
#अगर_घोषित CONFIG_PPC_POWERNV
		FW_FEATURE_POWERNV_ALWAYS &
#पूर्ण_अगर
#अगर_घोषित CONFIG_PPC_PS3
		FW_FEATURE_PS3_ALWAYS &
#पूर्ण_अगर
#अगर_घोषित CONFIG_PPC_NATIVE
		FW_FEATURE_NATIVE_ALWAYS &
#पूर्ण_अगर
		FW_FEATURE_POSSIBLE,

#अन्यथा /* CONFIG_PPC64 */
	FW_FEATURE_POSSIBLE = 0,
	FW_FEATURE_ALWAYS = 0,
#पूर्ण_अगर
पूर्ण;

/* This is used to identअगरy firmware features which are available
 * to the kernel.
 */
बाह्य अचिन्हित दीर्घ	घातerpc_firmware_features;

#घोषणा firmware_has_feature(feature)					\
	((FW_FEATURE_ALWAYS & (feature)) ||				\
		(FW_FEATURE_POSSIBLE & घातerpc_firmware_features & (feature)))

बाह्य व्योम प्रणाली_reset_fwnmi(व्योम);
बाह्य व्योम machine_check_fwnmi(व्योम);

/* This is true अगर we are using the firmware NMI handler (typically LPAR) */
बाह्य पूर्णांक fwnmi_active;
बाह्य पूर्णांक ibm_nmi_पूर्णांकerlock_token;

बाह्य अचिन्हित पूर्णांक __start___fw_ftr_fixup, __stop___fw_ftr_fixup;

#अगर_घोषित CONFIG_PPC_PSERIES
व्योम pseries_probe_fw_features(व्योम);
#अन्यथा
अटल अंतरभूत व्योम pseries_probe_fw_features(व्योम) अणु पूर्ण
#पूर्ण_अगर

#पूर्ण_अगर /* __ASSEMBLY__ */
#पूर्ण_अगर /* __KERNEL__ */
#पूर्ण_अगर /* __ASM_POWERPC_FIRMWARE_H */
