<शैली गुरु>
/* SPDX-License-Identअगरier: GPL-2.0-only */
/*
 * Copyright (C) 2012 ARM Ltd.
 */

#अगर_अघोषित __ASM_PERF_EVENT_H
#घोषणा __ASM_PERF_EVENT_H

#समावेश <यंत्र/stack_poपूर्णांकer.h>
#समावेश <यंत्र/ptrace.h>

#घोषणा	ARMV8_PMU_MAX_COUNTERS	32
#घोषणा	ARMV8_PMU_COUNTER_MASK	(ARMV8_PMU_MAX_COUNTERS - 1)

/*
 * Common architectural and microarchitectural event numbers.
 */
#घोषणा ARMV8_PMUV3_PERFCTR_SW_INCR				0x00
#घोषणा ARMV8_PMUV3_PERFCTR_L1I_CACHE_REFILL			0x01
#घोषणा ARMV8_PMUV3_PERFCTR_L1I_TLB_REFILL			0x02
#घोषणा ARMV8_PMUV3_PERFCTR_L1D_CACHE_REFILL			0x03
#घोषणा ARMV8_PMUV3_PERFCTR_L1D_CACHE				0x04
#घोषणा ARMV8_PMUV3_PERFCTR_L1D_TLB_REFILL			0x05
#घोषणा ARMV8_PMUV3_PERFCTR_LD_RETIRED				0x06
#घोषणा ARMV8_PMUV3_PERFCTR_ST_RETIRED				0x07
#घोषणा ARMV8_PMUV3_PERFCTR_INST_RETIRED			0x08
#घोषणा ARMV8_PMUV3_PERFCTR_EXC_TAKEN				0x09
#घोषणा ARMV8_PMUV3_PERFCTR_EXC_RETURN				0x0A
#घोषणा ARMV8_PMUV3_PERFCTR_CID_WRITE_RETIRED			0x0B
#घोषणा ARMV8_PMUV3_PERFCTR_PC_WRITE_RETIRED			0x0C
#घोषणा ARMV8_PMUV3_PERFCTR_BR_IMMED_RETIRED			0x0D
#घोषणा ARMV8_PMUV3_PERFCTR_BR_RETURN_RETIRED			0x0E
#घोषणा ARMV8_PMUV3_PERFCTR_UNALIGNED_LDST_RETIRED		0x0F
#घोषणा ARMV8_PMUV3_PERFCTR_BR_MIS_PRED				0x10
#घोषणा ARMV8_PMUV3_PERFCTR_CPU_CYCLES				0x11
#घोषणा ARMV8_PMUV3_PERFCTR_BR_PRED				0x12
#घोषणा ARMV8_PMUV3_PERFCTR_MEM_ACCESS				0x13
#घोषणा ARMV8_PMUV3_PERFCTR_L1I_CACHE				0x14
#घोषणा ARMV8_PMUV3_PERFCTR_L1D_CACHE_WB			0x15
#घोषणा ARMV8_PMUV3_PERFCTR_L2D_CACHE				0x16
#घोषणा ARMV8_PMUV3_PERFCTR_L2D_CACHE_REFILL			0x17
#घोषणा ARMV8_PMUV3_PERFCTR_L2D_CACHE_WB			0x18
#घोषणा ARMV8_PMUV3_PERFCTR_BUS_ACCESS				0x19
#घोषणा ARMV8_PMUV3_PERFCTR_MEMORY_ERROR			0x1A
#घोषणा ARMV8_PMUV3_PERFCTR_INST_SPEC				0x1B
#घोषणा ARMV8_PMUV3_PERFCTR_TTBR_WRITE_RETIRED			0x1C
#घोषणा ARMV8_PMUV3_PERFCTR_BUS_CYCLES				0x1D
#घोषणा ARMV8_PMUV3_PERFCTR_CHAIN				0x1E
#घोषणा ARMV8_PMUV3_PERFCTR_L1D_CACHE_ALLOCATE			0x1F
#घोषणा ARMV8_PMUV3_PERFCTR_L2D_CACHE_ALLOCATE			0x20
#घोषणा ARMV8_PMUV3_PERFCTR_BR_RETIRED				0x21
#घोषणा ARMV8_PMUV3_PERFCTR_BR_MIS_PRED_RETIRED			0x22
#घोषणा ARMV8_PMUV3_PERFCTR_STALL_FRONTEND			0x23
#घोषणा ARMV8_PMUV3_PERFCTR_STALL_BACKEND			0x24
#घोषणा ARMV8_PMUV3_PERFCTR_L1D_TLB				0x25
#घोषणा ARMV8_PMUV3_PERFCTR_L1I_TLB				0x26
#घोषणा ARMV8_PMUV3_PERFCTR_L2I_CACHE				0x27
#घोषणा ARMV8_PMUV3_PERFCTR_L2I_CACHE_REFILL			0x28
#घोषणा ARMV8_PMUV3_PERFCTR_L3D_CACHE_ALLOCATE			0x29
#घोषणा ARMV8_PMUV3_PERFCTR_L3D_CACHE_REFILL			0x2A
#घोषणा ARMV8_PMUV3_PERFCTR_L3D_CACHE				0x2B
#घोषणा ARMV8_PMUV3_PERFCTR_L3D_CACHE_WB			0x2C
#घोषणा ARMV8_PMUV3_PERFCTR_L2D_TLB_REFILL			0x2D
#घोषणा ARMV8_PMUV3_PERFCTR_L2I_TLB_REFILL			0x2E
#घोषणा ARMV8_PMUV3_PERFCTR_L2D_TLB				0x2F
#घोषणा ARMV8_PMUV3_PERFCTR_L2I_TLB				0x30
#घोषणा ARMV8_PMUV3_PERFCTR_REMOTE_ACCESS			0x31
#घोषणा ARMV8_PMUV3_PERFCTR_LL_CACHE				0x32
#घोषणा ARMV8_PMUV3_PERFCTR_LL_CACHE_MISS			0x33
#घोषणा ARMV8_PMUV3_PERFCTR_DTLB_WALK				0x34
#घोषणा ARMV8_PMUV3_PERFCTR_ITLB_WALK				0x35
#घोषणा ARMV8_PMUV3_PERFCTR_LL_CACHE_RD				0x36
#घोषणा ARMV8_PMUV3_PERFCTR_LL_CACHE_MISS_RD			0x37
#घोषणा ARMV8_PMUV3_PERFCTR_REMOTE_ACCESS_RD			0x38
#घोषणा ARMV8_PMUV3_PERFCTR_L1D_CACHE_LMISS_RD			0x39
#घोषणा ARMV8_PMUV3_PERFCTR_OP_RETIRED				0x3A
#घोषणा ARMV8_PMUV3_PERFCTR_OP_SPEC				0x3B
#घोषणा ARMV8_PMUV3_PERFCTR_STALL				0x3C
#घोषणा ARMV8_PMUV3_PERFCTR_STALL_SLOT_BACKEND			0x3D
#घोषणा ARMV8_PMUV3_PERFCTR_STALL_SLOT_FRONTEND			0x3E
#घोषणा ARMV8_PMUV3_PERFCTR_STALL_SLOT				0x3F

/* Statistical profiling extension microarchitectural events */
#घोषणा	ARMV8_SPE_PERFCTR_SAMPLE_POP				0x4000
#घोषणा	ARMV8_SPE_PERFCTR_SAMPLE_FEED				0x4001
#घोषणा	ARMV8_SPE_PERFCTR_SAMPLE_FILTRATE			0x4002
#घोषणा	ARMV8_SPE_PERFCTR_SAMPLE_COLLISION			0x4003

/* AMUv1 architecture events */
#घोषणा	ARMV8_AMU_PERFCTR_CNT_CYCLES				0x4004
#घोषणा	ARMV8_AMU_PERFCTR_STALL_BACKEND_MEM			0x4005

/* दीर्घ-latency पढ़ो miss events */
#घोषणा	ARMV8_PMUV3_PERFCTR_L1I_CACHE_LMISS			0x4006
#घोषणा	ARMV8_PMUV3_PERFCTR_L2D_CACHE_LMISS_RD			0x4009
#घोषणा	ARMV8_PMUV3_PERFCTR_L2I_CACHE_LMISS			0x400A
#घोषणा	ARMV8_PMUV3_PERFCTR_L3D_CACHE_LMISS_RD			0x400B

/* additional latency from alignment events */
#घोषणा	ARMV8_PMUV3_PERFCTR_LDST_ALIGN_LAT			0x4020
#घोषणा	ARMV8_PMUV3_PERFCTR_LD_ALIGN_LAT			0x4021
#घोषणा	ARMV8_PMUV3_PERFCTR_ST_ALIGN_LAT			0x4022

/* Armv8.5 Memory Tagging Extension events */
#घोषणा	ARMV8_MTE_PERFCTR_MEM_ACCESS_CHECKED			0x4024
#घोषणा	ARMV8_MTE_PERFCTR_MEM_ACCESS_CHECKED_RD			0x4025
#घोषणा	ARMV8_MTE_PERFCTR_MEM_ACCESS_CHECKED_WR			0x4026

/* ARMv8 recommended implementation defined event types */
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_CACHE_RD			0x40
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_CACHE_WR			0x41
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_CACHE_REFILL_RD		0x42
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_CACHE_REFILL_WR		0x43
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_CACHE_REFILL_INNER		0x44
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_CACHE_REFILL_OUTER		0x45
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_CACHE_WB_VICTIM		0x46
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_CACHE_WB_CLEAN			0x47
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_CACHE_INVAL			0x48

#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_TLB_REFILL_RD			0x4C
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_TLB_REFILL_WR			0x4D
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_TLB_RD				0x4E
#घोषणा ARMV8_IMPDEF_PERFCTR_L1D_TLB_WR				0x4F
#घोषणा ARMV8_IMPDEF_PERFCTR_L2D_CACHE_RD			0x50
#घोषणा ARMV8_IMPDEF_PERFCTR_L2D_CACHE_WR			0x51
#घोषणा ARMV8_IMPDEF_PERFCTR_L2D_CACHE_REFILL_RD		0x52
#घोषणा ARMV8_IMPDEF_PERFCTR_L2D_CACHE_REFILL_WR		0x53

#घोषणा ARMV8_IMPDEF_PERFCTR_L2D_CACHE_WB_VICTIM		0x56
#घोषणा ARMV8_IMPDEF_PERFCTR_L2D_CACHE_WB_CLEAN			0x57
#घोषणा ARMV8_IMPDEF_PERFCTR_L2D_CACHE_INVAL			0x58

#घोषणा ARMV8_IMPDEF_PERFCTR_L2D_TLB_REFILL_RD			0x5C
#घोषणा ARMV8_IMPDEF_PERFCTR_L2D_TLB_REFILL_WR			0x5D
#घोषणा ARMV8_IMPDEF_PERFCTR_L2D_TLB_RD				0x5E
#घोषणा ARMV8_IMPDEF_PERFCTR_L2D_TLB_WR				0x5F
#घोषणा ARMV8_IMPDEF_PERFCTR_BUS_ACCESS_RD			0x60
#घोषणा ARMV8_IMPDEF_PERFCTR_BUS_ACCESS_WR			0x61
#घोषणा ARMV8_IMPDEF_PERFCTR_BUS_ACCESS_SHARED			0x62
#घोषणा ARMV8_IMPDEF_PERFCTR_BUS_ACCESS_NOT_SHARED		0x63
#घोषणा ARMV8_IMPDEF_PERFCTR_BUS_ACCESS_NORMAL			0x64
#घोषणा ARMV8_IMPDEF_PERFCTR_BUS_ACCESS_PERIPH			0x65
#घोषणा ARMV8_IMPDEF_PERFCTR_MEM_ACCESS_RD			0x66
#घोषणा ARMV8_IMPDEF_PERFCTR_MEM_ACCESS_WR			0x67
#घोषणा ARMV8_IMPDEF_PERFCTR_UNALIGNED_LD_SPEC			0x68
#घोषणा ARMV8_IMPDEF_PERFCTR_UNALIGNED_ST_SPEC			0x69
#घोषणा ARMV8_IMPDEF_PERFCTR_UNALIGNED_LDST_SPEC		0x6A

#घोषणा ARMV8_IMPDEF_PERFCTR_LDREX_SPEC				0x6C
#घोषणा ARMV8_IMPDEF_PERFCTR_STREX_PASS_SPEC			0x6D
#घोषणा ARMV8_IMPDEF_PERFCTR_STREX_FAIL_SPEC			0x6E
#घोषणा ARMV8_IMPDEF_PERFCTR_STREX_SPEC				0x6F
#घोषणा ARMV8_IMPDEF_PERFCTR_LD_SPEC				0x70
#घोषणा ARMV8_IMPDEF_PERFCTR_ST_SPEC				0x71
#घोषणा ARMV8_IMPDEF_PERFCTR_LDST_SPEC				0x72
#घोषणा ARMV8_IMPDEF_PERFCTR_DP_SPEC				0x73
#घोषणा ARMV8_IMPDEF_PERFCTR_ASE_SPEC				0x74
#घोषणा ARMV8_IMPDEF_PERFCTR_VFP_SPEC				0x75
#घोषणा ARMV8_IMPDEF_PERFCTR_PC_WRITE_SPEC			0x76
#घोषणा ARMV8_IMPDEF_PERFCTR_CRYPTO_SPEC			0x77
#घोषणा ARMV8_IMPDEF_PERFCTR_BR_IMMED_SPEC			0x78
#घोषणा ARMV8_IMPDEF_PERFCTR_BR_RETURN_SPEC			0x79
#घोषणा ARMV8_IMPDEF_PERFCTR_BR_INसूचीECT_SPEC			0x7A

#घोषणा ARMV8_IMPDEF_PERFCTR_ISB_SPEC				0x7C
#घोषणा ARMV8_IMPDEF_PERFCTR_DSB_SPEC				0x7D
#घोषणा ARMV8_IMPDEF_PERFCTR_DMB_SPEC				0x7E

#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_UNDEF				0x81
#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_SVC				0x82
#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_PABORT				0x83
#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_DABORT				0x84

#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_IRQ				0x86
#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_FIQ				0x87
#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_SMC				0x88

#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_HVC				0x8A
#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_TRAP_PABORT			0x8B
#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_TRAP_DABORT			0x8C
#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_TRAP_OTHER			0x8D
#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_TRAP_IRQ			0x8E
#घोषणा ARMV8_IMPDEF_PERFCTR_EXC_TRAP_FIQ			0x8F
#घोषणा ARMV8_IMPDEF_PERFCTR_RC_LD_SPEC				0x90
#घोषणा ARMV8_IMPDEF_PERFCTR_RC_ST_SPEC				0x91

#घोषणा ARMV8_IMPDEF_PERFCTR_L3D_CACHE_RD			0xA0
#घोषणा ARMV8_IMPDEF_PERFCTR_L3D_CACHE_WR			0xA1
#घोषणा ARMV8_IMPDEF_PERFCTR_L3D_CACHE_REFILL_RD		0xA2
#घोषणा ARMV8_IMPDEF_PERFCTR_L3D_CACHE_REFILL_WR		0xA3

#घोषणा ARMV8_IMPDEF_PERFCTR_L3D_CACHE_WB_VICTIM		0xA6
#घोषणा ARMV8_IMPDEF_PERFCTR_L3D_CACHE_WB_CLEAN			0xA7
#घोषणा ARMV8_IMPDEF_PERFCTR_L3D_CACHE_INVAL			0xA8

/*
 * Per-CPU PMCR: config reg
 */
#घोषणा ARMV8_PMU_PMCR_E	(1 << 0) /* Enable all counters */
#घोषणा ARMV8_PMU_PMCR_P	(1 << 1) /* Reset all counters */
#घोषणा ARMV8_PMU_PMCR_C	(1 << 2) /* Cycle counter reset */
#घोषणा ARMV8_PMU_PMCR_D	(1 << 3) /* CCNT counts every 64th cpu cycle */
#घोषणा ARMV8_PMU_PMCR_X	(1 << 4) /* Export to ETM */
#घोषणा ARMV8_PMU_PMCR_DP	(1 << 5) /* Disable CCNT अगर non-invasive debug*/
#घोषणा ARMV8_PMU_PMCR_LC	(1 << 6) /* Overflow on 64 bit cycle counter */
#घोषणा ARMV8_PMU_PMCR_LP	(1 << 7) /* Long event counter enable */
#घोषणा	ARMV8_PMU_PMCR_N_SHIFT	11	 /* Number of counters supported */
#घोषणा	ARMV8_PMU_PMCR_N_MASK	0x1f
#घोषणा	ARMV8_PMU_PMCR_MASK	0xff	 /* Mask क्रम writable bits */

/*
 * PMOVSR: counters overflow flag status reg
 */
#घोषणा	ARMV8_PMU_OVSR_MASK		0xffffffff	/* Mask क्रम writable bits */
#घोषणा	ARMV8_PMU_OVERFLOWED_MASK	ARMV8_PMU_OVSR_MASK

/*
 * PMXEVTYPER: Event selection reg
 */
#घोषणा	ARMV8_PMU_EVTYPE_MASK	0xc800ffff	/* Mask क्रम writable bits */
#घोषणा	ARMV8_PMU_EVTYPE_EVENT	0xffff		/* Mask क्रम EVENT bits */

/*
 * Event filters क्रम PMUv3
 */
#घोषणा	ARMV8_PMU_EXCLUDE_EL1	(1U << 31)
#घोषणा	ARMV8_PMU_EXCLUDE_EL0	(1U << 30)
#घोषणा	ARMV8_PMU_INCLUDE_EL2	(1U << 27)

/*
 * PMUSERENR: user enable reg
 */
#घोषणा ARMV8_PMU_USERENR_MASK	0xf		/* Mask क्रम writable bits */
#घोषणा ARMV8_PMU_USERENR_EN	(1 << 0) /* PMU regs can be accessed at EL0 */
#घोषणा ARMV8_PMU_USERENR_SW	(1 << 1) /* PMSWINC can be written at EL0 */
#घोषणा ARMV8_PMU_USERENR_CR	(1 << 2) /* Cycle counter can be पढ़ो at EL0 */
#घोषणा ARMV8_PMU_USERENR_ER	(1 << 3) /* Event counter can be पढ़ो at EL0 */

/* PMMIR_EL1.SLOTS mask */
#घोषणा ARMV8_PMU_SLOTS_MASK	0xff

#अगर_घोषित CONFIG_PERF_EVENTS
काष्ठा pt_regs;
बाह्य अचिन्हित दीर्घ perf_inकाष्ठाion_poपूर्णांकer(काष्ठा pt_regs *regs);
बाह्य अचिन्हित दीर्घ perf_misc_flags(काष्ठा pt_regs *regs);
#घोषणा perf_misc_flags(regs)	perf_misc_flags(regs)
#घोषणा perf_arch_bpf_user_pt_regs(regs) &regs->user_regs
#पूर्ण_अगर

#घोषणा perf_arch_fetch_caller_regs(regs, __ip) अणु \
	(regs)->pc = (__ip);    \
	(regs)->regs[29] = (अचिन्हित दीर्घ) __builtin_frame_address(0); \
	(regs)->sp = current_stack_poपूर्णांकer; \
	(regs)->pstate = PSR_MODE_EL1h;	\
पूर्ण

#पूर्ण_अगर
