<शैली गुरु>
// SPDX-License-Identअगरier: GPL-2.0-or-later
/*
 *  Copyright (c) 2005 The University of Waikato, Hamilton, New Zealand.
 *  Copyright (c) 2005 Ian McDonald <ian.mcकरोnald@jandi.co.nz>
 *  Copyright (c) 2005 Arnalकरो Carvalho de Melo <acme@conectiva.com.br>
 *  Copyright (c) 2003 Nils-Erik Mattsson, Joacim Haggmark, Magnus Erixzon
 */

#समावेश <linux/module.h>
#समावेश "../../dccp.h"
#समावेश "tfrc.h"

#घोषणा TFRC_CALC_X_ARRSIZE 500
#घोषणा TFRC_CALC_X_SPLIT   50000	/* 0.05 * 1000000, details below */
#घोषणा TFRC_SMALLEST_P	    (TFRC_CALC_X_SPLIT/TFRC_CALC_X_ARRSIZE)

/*
  TFRC TCP Reno Throughput Equation Lookup Table क्रम f(p)

  The following two-column lookup table implements a part of the TCP throughput
  equation from [RFC 3448, sec. 3.1]:

				     s
  X_calc  =  --------------------------------------------------------------
	     R * वर्ग_मूल(2*b*p/3) + (3 * t_RTO * वर्ग_मूल(3*b*p/8) * (p + 32*p^3))

  Where:
	X      is the transmit rate in bytes/second
	s      is the packet size in bytes
	R      is the round trip समय in seconds
	p      is the loss event rate, between 0 and 1.0, of the number of loss
		      events as a fraction of the number of packets transmitted
	t_RTO  is the TCP retransmission समयout value in seconds
	b      is the number of packets acknowledged by a single TCP ACK

  We can assume that b = 1 and t_RTO is 4 * R. The equation now becomes:

				     s
  X_calc  =  -------------------------------------------------------
	     R * वर्ग_मूल(p*2/3) + (12 * R * वर्ग_मूल(p*3/8) * (p + 32*p^3))

  which we can अवरोध करोwn पूर्णांकo:

		      s
	X_calc  =  ---------
		    R * f(p)

  where f(p) is given क्रम 0 < p <= 1 by:

	f(p)  =  वर्ग_मूल(2*p/3) + 12 * वर्ग_मूल(3*p/8) *  (p + 32*p^3)

  Since this is kernel code, भग्नing-poपूर्णांक arithmetic is aव्योमed in favour of
  पूर्णांकeger arithmetic. This means that nearly all fractional parameters are
  scaled by 1000000:
    * the parameters p and R
    * the वापस result f(p)
  The lookup table thereक्रमe actually tabulates the following function g(q):

	g(q)  =  1000000 * f(q/1000000)

  Hence, when p <= 1, q must be less than or equal to 1000000. To achieve finer
  granularity क्रम the practically more relevant हाल of small values of p (up to
  5%), the second column is used; the first one ranges up to 100%.  This split
  corresponds to the value of q = TFRC_CALC_X_SPLIT. At the same समय this also
  determines the smallest resolution possible with this lookup table:

    TFRC_SMALLEST_P   =  TFRC_CALC_X_SPLIT / TFRC_CALC_X_ARRSIZE

  The entire table is generated by:
    क्रम(i=0; i < TFRC_CALC_X_ARRSIZE; i++) अणु
	lookup[i][0]  =  g((i+1) * 1000000/TFRC_CALC_X_ARRSIZE);
	lookup[i][1]  =  g((i+1) * TFRC_CALC_X_SPLIT/TFRC_CALC_X_ARRSIZE);
    पूर्ण

  With the given configuration, we have, with M = TFRC_CALC_X_ARRSIZE-1,
    lookup[0][0]  =  g(1000000/(M+1))		= 1000000 * f(0.2%)
    lookup[M][0]  =  g(1000000)			= 1000000 * f(100%)
    lookup[0][1]  =  g(TFRC_SMALLEST_P)		= 1000000 * f(0.01%)
    lookup[M][1]  =  g(TFRC_CALC_X_SPLIT)	= 1000000 * f(5%)

  In summary, the two columns represent f(p) क्रम the following ranges:
    * The first column is क्रम   0.002  <= p <= 1.0
    * The second column is क्रम  0.0001 <= p <= 0.05
  Where the columns overlap, the second (finer-grained) is given preference,
  i.e. the first column is used only क्रम p >= 0.05.
 */
अटल स्थिर u32 tfrc_calc_x_lookup[TFRC_CALC_X_ARRSIZE][2] = अणु
	अणु     37172,   8172 पूर्ण,
	अणु     53499,  11567 पूर्ण,
	अणु     66664,  14180 पूर्ण,
	अणु     78298,  16388 पूर्ण,
	अणु     89021,  18339 पूर्ण,
	अणु     99147,  20108 पूर्ण,
	अणु    108858,  21738 पूर्ण,
	अणु    118273,  23260 पूर्ण,
	अणु    127474,  24693 पूर्ण,
	अणु    136520,  26052 पूर्ण,
	अणु    145456,  27348 पूर्ण,
	अणु    154316,  28589 पूर्ण,
	अणु    163130,  29783 पूर्ण,
	अणु    171919,  30935 पूर्ण,
	अणु    180704,  32049 पूर्ण,
	अणु    189502,  33130 पूर्ण,
	अणु    198328,  34180 पूर्ण,
	अणु    207194,  35202 पूर्ण,
	अणु    216114,  36198 पूर्ण,
	अणु    225097,  37172 पूर्ण,
	अणु    234153,  38123 पूर्ण,
	अणु    243294,  39055 पूर्ण,
	अणु    252527,  39968 पूर्ण,
	अणु    261861,  40864 पूर्ण,
	अणु    271305,  41743 पूर्ण,
	अणु    280866,  42607 पूर्ण,
	अणु    290553,  43457 पूर्ण,
	अणु    300372,  44293 पूर्ण,
	अणु    310333,  45117 पूर्ण,
	अणु    320441,  45929 पूर्ण,
	अणु    330705,  46729 पूर्ण,
	अणु    341131,  47518 पूर्ण,
	अणु    351728,  48297 पूर्ण,
	अणु    362501,  49066 पूर्ण,
	अणु    373460,  49826 पूर्ण,
	अणु    384609,  50577 पूर्ण,
	अणु    395958,  51320 पूर्ण,
	अणु    407513,  52054 पूर्ण,
	अणु    419281,  52780 पूर्ण,
	अणु    431270,  53499 पूर्ण,
	अणु    443487,  54211 पूर्ण,
	अणु    455940,  54916 पूर्ण,
	अणु    468635,  55614 पूर्ण,
	अणु    481581,  56306 पूर्ण,
	अणु    494785,  56991 पूर्ण,
	अणु    508254,  57671 पूर्ण,
	अणु    521996,  58345 पूर्ण,
	अणु    536019,  59014 पूर्ण,
	अणु    550331,  59677 पूर्ण,
	अणु    564939,  60335 पूर्ण,
	अणु    579851,  60988 पूर्ण,
	अणु    595075,  61636 पूर्ण,
	अणु    610619,  62279 पूर्ण,
	अणु    626491,  62918 पूर्ण,
	अणु    642700,  63553 पूर्ण,
	अणु    659253,  64183 पूर्ण,
	अणु    676158,  64809 पूर्ण,
	अणु    693424,  65431 पूर्ण,
	अणु    711060,  66050 पूर्ण,
	अणु    729073,  66664 पूर्ण,
	अणु    747472,  67275 पूर्ण,
	अणु    766266,  67882 पूर्ण,
	अणु    785464,  68486 पूर्ण,
	अणु    805073,  69087 पूर्ण,
	अणु    825103,  69684 पूर्ण,
	अणु    845562,  70278 पूर्ण,
	अणु    866460,  70868 पूर्ण,
	अणु    887805,  71456 पूर्ण,
	अणु    909606,  72041 पूर्ण,
	अणु    931873,  72623 पूर्ण,
	अणु    954614,  73202 पूर्ण,
	अणु    977839,  73778 पूर्ण,
	अणु   1001557,  74352 पूर्ण,
	अणु   1025777,  74923 पूर्ण,
	अणु   1050508,  75492 पूर्ण,
	अणु   1075761,  76058 पूर्ण,
	अणु   1101544,  76621 पूर्ण,
	अणु   1127867,  77183 पूर्ण,
	अणु   1154739,  77741 पूर्ण,
	अणु   1182172,  78298 पूर्ण,
	अणु   1210173,  78852 पूर्ण,
	अणु   1238753,  79405 पूर्ण,
	अणु   1267922,  79955 पूर्ण,
	अणु   1297689,  80503 पूर्ण,
	अणु   1328066,  81049 पूर्ण,
	अणु   1359060,  81593 पूर्ण,
	अणु   1390684,  82135 पूर्ण,
	अणु   1422947,  82675 पूर्ण,
	अणु   1455859,  83213 पूर्ण,
	अणु   1489430,  83750 पूर्ण,
	अणु   1523671,  84284 पूर्ण,
	अणु   1558593,  84817 पूर्ण,
	अणु   1594205,  85348 पूर्ण,
	अणु   1630518,  85878 पूर्ण,
	अणु   1667543,  86406 पूर्ण,
	अणु   1705290,  86932 पूर्ण,
	अणु   1743770,  87457 पूर्ण,
	अणु   1782994,  87980 पूर्ण,
	अणु   1822973,  88501 पूर्ण,
	अणु   1863717,  89021 पूर्ण,
	अणु   1905237,  89540 पूर्ण,
	अणु   1947545,  90057 पूर्ण,
	अणु   1990650,  90573 पूर्ण,
	अणु   2034566,  91087 पूर्ण,
	अणु   2079301,  91600 पूर्ण,
	अणु   2124869,  92111 पूर्ण,
	अणु   2171279,  92622 पूर्ण,
	अणु   2218543,  93131 पूर्ण,
	अणु   2266673,  93639 पूर्ण,
	अणु   2315680,  94145 पूर्ण,
	अणु   2365575,  94650 पूर्ण,
	अणु   2416371,  95154 पूर्ण,
	अणु   2468077,  95657 पूर्ण,
	अणु   2520707,  96159 पूर्ण,
	अणु   2574271,  96660 पूर्ण,
	अणु   2628782,  97159 पूर्ण,
	अणु   2684250,  97658 पूर्ण,
	अणु   2740689,  98155 पूर्ण,
	अणु   2798110,  98651 पूर्ण,
	अणु   2856524,  99147 पूर्ण,
	अणु   2915944,  99641 पूर्ण,
	अणु   2976382, 100134 पूर्ण,
	अणु   3037850, 100626 पूर्ण,
	अणु   3100360, 101117 पूर्ण,
	अणु   3163924, 101608 पूर्ण,
	अणु   3228554, 102097 पूर्ण,
	अणु   3294263, 102586 पूर्ण,
	अणु   3361063, 103073 पूर्ण,
	अणु   3428966, 103560 पूर्ण,
	अणु   3497984, 104045 पूर्ण,
	अणु   3568131, 104530 पूर्ण,
	अणु   3639419, 105014 पूर्ण,
	अणु   3711860, 105498 पूर्ण,
	अणु   3785467, 105980 पूर्ण,
	अणु   3860253, 106462 पूर्ण,
	अणु   3936229, 106942 पूर्ण,
	अणु   4013410, 107422 पूर्ण,
	अणु   4091808, 107902 पूर्ण,
	अणु   4171435, 108380 पूर्ण,
	अणु   4252306, 108858 पूर्ण,
	अणु   4334431, 109335 पूर्ण,
	अणु   4417825, 109811 पूर्ण,
	अणु   4502501, 110287 पूर्ण,
	अणु   4588472, 110762 पूर्ण,
	अणु   4675750, 111236 पूर्ण,
	अणु   4764349, 111709 पूर्ण,
	अणु   4854283, 112182 पूर्ण,
	अणु   4945564, 112654 पूर्ण,
	अणु   5038206, 113126 पूर्ण,
	अणु   5132223, 113597 पूर्ण,
	अणु   5227627, 114067 पूर्ण,
	अणु   5324432, 114537 पूर्ण,
	अणु   5422652, 115006 पूर्ण,
	अणु   5522299, 115474 पूर्ण,
	अणु   5623389, 115942 पूर्ण,
	अणु   5725934, 116409 पूर्ण,
	अणु   5829948, 116876 पूर्ण,
	अणु   5935446, 117342 पूर्ण,
	अणु   6042439, 117808 पूर्ण,
	अणु   6150943, 118273 पूर्ण,
	अणु   6260972, 118738 पूर्ण,
	अणु   6372538, 119202 पूर्ण,
	अणु   6485657, 119665 पूर्ण,
	अणु   6600342, 120128 पूर्ण,
	अणु   6716607, 120591 पूर्ण,
	अणु   6834467, 121053 पूर्ण,
	अणु   6953935, 121514 पूर्ण,
	अणु   7075025, 121976 पूर्ण,
	अणु   7197752, 122436 पूर्ण,
	अणु   7322131, 122896 पूर्ण,
	अणु   7448175, 123356 पूर्ण,
	अणु   7575898, 123815 पूर्ण,
	अणु   7705316, 124274 पूर्ण,
	अणु   7836442, 124733 पूर्ण,
	अणु   7969291, 125191 पूर्ण,
	अणु   8103877, 125648 पूर्ण,
	अणु   8240216, 126105 पूर्ण,
	अणु   8378321, 126562 पूर्ण,
	अणु   8518208, 127018 पूर्ण,
	अणु   8659890, 127474 पूर्ण,
	अणु   8803384, 127930 पूर्ण,
	अणु   8948702, 128385 पूर्ण,
	अणु   9095861, 128840 पूर्ण,
	अणु   9244875, 129294 पूर्ण,
	अणु   9395760, 129748 पूर्ण,
	अणु   9548529, 130202 पूर्ण,
	अणु   9703198, 130655 पूर्ण,
	अणु   9859782, 131108 पूर्ण,
	अणु  10018296, 131561 पूर्ण,
	अणु  10178755, 132014 पूर्ण,
	अणु  10341174, 132466 पूर्ण,
	अणु  10505569, 132917 पूर्ण,
	अणु  10671954, 133369 पूर्ण,
	अणु  10840345, 133820 पूर्ण,
	अणु  11010757, 134271 पूर्ण,
	अणु  11183206, 134721 पूर्ण,
	अणु  11357706, 135171 पूर्ण,
	अणु  11534274, 135621 पूर्ण,
	अणु  11712924, 136071 पूर्ण,
	अणु  11893673, 136520 पूर्ण,
	अणु  12076536, 136969 पूर्ण,
	अणु  12261527, 137418 पूर्ण,
	अणु  12448664, 137867 पूर्ण,
	अणु  12637961, 138315 पूर्ण,
	अणु  12829435, 138763 पूर्ण,
	अणु  13023101, 139211 पूर्ण,
	अणु  13218974, 139658 पूर्ण,
	अणु  13417071, 140106 पूर्ण,
	अणु  13617407, 140553 पूर्ण,
	अणु  13819999, 140999 पूर्ण,
	अणु  14024862, 141446 पूर्ण,
	अणु  14232012, 141892 पूर्ण,
	अणु  14441465, 142339 पूर्ण,
	अणु  14653238, 142785 पूर्ण,
	अणु  14867346, 143230 पूर्ण,
	अणु  15083805, 143676 पूर्ण,
	अणु  15302632, 144121 पूर्ण,
	अणु  15523842, 144566 पूर्ण,
	अणु  15747453, 145011 पूर्ण,
	अणु  15973479, 145456 पूर्ण,
	अणु  16201939, 145900 पूर्ण,
	अणु  16432847, 146345 पूर्ण,
	अणु  16666221, 146789 पूर्ण,
	अणु  16902076, 147233 पूर्ण,
	अणु  17140429, 147677 पूर्ण,
	अणु  17381297, 148121 पूर्ण,
	अणु  17624696, 148564 पूर्ण,
	अणु  17870643, 149007 पूर्ण,
	अणु  18119154, 149451 पूर्ण,
	अणु  18370247, 149894 पूर्ण,
	अणु  18623936, 150336 पूर्ण,
	अणु  18880241, 150779 पूर्ण,
	अणु  19139176, 151222 पूर्ण,
	अणु  19400759, 151664 पूर्ण,
	अणु  19665007, 152107 पूर्ण,
	अणु  19931936, 152549 पूर्ण,
	अणु  20201564, 152991 पूर्ण,
	अणु  20473907, 153433 पूर्ण,
	अणु  20748982, 153875 पूर्ण,
	अणु  21026807, 154316 पूर्ण,
	अणु  21307399, 154758 पूर्ण,
	अणु  21590773, 155199 पूर्ण,
	अणु  21876949, 155641 पूर्ण,
	अणु  22165941, 156082 पूर्ण,
	अणु  22457769, 156523 पूर्ण,
	अणु  22752449, 156964 पूर्ण,
	अणु  23049999, 157405 पूर्ण,
	अणु  23350435, 157846 पूर्ण,
	अणु  23653774, 158287 पूर्ण,
	अणु  23960036, 158727 पूर्ण,
	अणु  24269236, 159168 पूर्ण,
	अणु  24581392, 159608 पूर्ण,
	अणु  24896521, 160049 पूर्ण,
	अणु  25214642, 160489 पूर्ण,
	अणु  25535772, 160929 पूर्ण,
	अणु  25859927, 161370 पूर्ण,
	अणु  26187127, 161810 पूर्ण,
	अणु  26517388, 162250 पूर्ण,
	अणु  26850728, 162690 पूर्ण,
	अणु  27187165, 163130 पूर्ण,
	अणु  27526716, 163569 पूर्ण,
	अणु  27869400, 164009 पूर्ण,
	अणु  28215234, 164449 पूर्ण,
	अणु  28564236, 164889 पूर्ण,
	अणु  28916423, 165328 पूर्ण,
	अणु  29271815, 165768 पूर्ण,
	अणु  29630428, 166208 पूर्ण,
	अणु  29992281, 166647 पूर्ण,
	अणु  30357392, 167087 पूर्ण,
	अणु  30725779, 167526 पूर्ण,
	अणु  31097459, 167965 पूर्ण,
	अणु  31472452, 168405 पूर्ण,
	अणु  31850774, 168844 पूर्ण,
	अणु  32232445, 169283 पूर्ण,
	अणु  32617482, 169723 पूर्ण,
	अणु  33005904, 170162 पूर्ण,
	अणु  33397730, 170601 पूर्ण,
	अणु  33792976, 171041 पूर्ण,
	अणु  34191663, 171480 पूर्ण,
	अणु  34593807, 171919 पूर्ण,
	अणु  34999428, 172358 पूर्ण,
	अणु  35408544, 172797 पूर्ण,
	अणु  35821174, 173237 पूर्ण,
	अणु  36237335, 173676 पूर्ण,
	अणु  36657047, 174115 पूर्ण,
	अणु  37080329, 174554 पूर्ण,
	अणु  37507197, 174993 पूर्ण,
	अणु  37937673, 175433 पूर्ण,
	अणु  38371773, 175872 पूर्ण,
	अणु  38809517, 176311 पूर्ण,
	अणु  39250924, 176750 पूर्ण,
	अणु  39696012, 177190 पूर्ण,
	अणु  40144800, 177629 पूर्ण,
	अणु  40597308, 178068 पूर्ण,
	अणु  41053553, 178507 पूर्ण,
	अणु  41513554, 178947 पूर्ण,
	अणु  41977332, 179386 पूर्ण,
	अणु  42444904, 179825 पूर्ण,
	अणु  42916290, 180265 पूर्ण,
	अणु  43391509, 180704 पूर्ण,
	अणु  43870579, 181144 पूर्ण,
	अणु  44353520, 181583 पूर्ण,
	अणु  44840352, 182023 पूर्ण,
	अणु  45331092, 182462 पूर्ण,
	अणु  45825761, 182902 पूर्ण,
	अणु  46324378, 183342 पूर्ण,
	अणु  46826961, 183781 पूर्ण,
	अणु  47333531, 184221 पूर्ण,
	अणु  47844106, 184661 पूर्ण,
	अणु  48358706, 185101 पूर्ण,
	अणु  48877350, 185541 पूर्ण,
	अणु  49400058, 185981 पूर्ण,
	अणु  49926849, 186421 पूर्ण,
	अणु  50457743, 186861 पूर्ण,
	अणु  50992759, 187301 पूर्ण,
	अणु  51531916, 187741 पूर्ण,
	अणु  52075235, 188181 पूर्ण,
	अणु  52622735, 188622 पूर्ण,
	अणु  53174435, 189062 पूर्ण,
	अणु  53730355, 189502 पूर्ण,
	अणु  54290515, 189943 पूर्ण,
	अणु  54854935, 190383 पूर्ण,
	अणु  55423634, 190824 पूर्ण,
	अणु  55996633, 191265 पूर्ण,
	अणु  56573950, 191706 पूर्ण,
	अणु  57155606, 192146 पूर्ण,
	अणु  57741621, 192587 पूर्ण,
	अणु  58332014, 193028 पूर्ण,
	अणु  58926806, 193470 पूर्ण,
	अणु  59526017, 193911 पूर्ण,
	अणु  60129666, 194352 पूर्ण,
	अणु  60737774, 194793 पूर्ण,
	अणु  61350361, 195235 पूर्ण,
	अणु  61967446, 195677 पूर्ण,
	अणु  62589050, 196118 पूर्ण,
	अणु  63215194, 196560 पूर्ण,
	अणु  63845897, 197002 पूर्ण,
	अणु  64481179, 197444 पूर्ण,
	अणु  65121061, 197886 पूर्ण,
	अणु  65765563, 198328 पूर्ण,
	अणु  66414705, 198770 पूर्ण,
	अणु  67068508, 199213 पूर्ण,
	अणु  67726992, 199655 पूर्ण,
	अणु  68390177, 200098 पूर्ण,
	अणु  69058085, 200540 पूर्ण,
	अणु  69730735, 200983 पूर्ण,
	अणु  70408147, 201426 पूर्ण,
	अणु  71090343, 201869 पूर्ण,
	अणु  71777343, 202312 पूर्ण,
	अणु  72469168, 202755 पूर्ण,
	अणु  73165837, 203199 पूर्ण,
	अणु  73867373, 203642 पूर्ण,
	अणु  74573795, 204086 पूर्ण,
	अणु  75285124, 204529 पूर्ण,
	अणु  76001380, 204973 पूर्ण,
	अणु  76722586, 205417 पूर्ण,
	अणु  77448761, 205861 पूर्ण,
	अणु  78179926, 206306 पूर्ण,
	अणु  78916102, 206750 पूर्ण,
	अणु  79657310, 207194 पूर्ण,
	अणु  80403571, 207639 पूर्ण,
	अणु  81154906, 208084 पूर्ण,
	अणु  81911335, 208529 पूर्ण,
	अणु  82672880, 208974 पूर्ण,
	अणु  83439562, 209419 पूर्ण,
	अणु  84211402, 209864 पूर्ण,
	अणु  84988421, 210309 पूर्ण,
	अणु  85770640, 210755 पूर्ण,
	अणु  86558080, 211201 पूर्ण,
	अणु  87350762, 211647 पूर्ण,
	अणु  88148708, 212093 पूर्ण,
	अणु  88951938, 212539 पूर्ण,
	अणु  89760475, 212985 पूर्ण,
	अणु  90574339, 213432 पूर्ण,
	अणु  91393551, 213878 पूर्ण,
	अणु  92218133, 214325 पूर्ण,
	अणु  93048107, 214772 पूर्ण,
	अणु  93883493, 215219 पूर्ण,
	अणु  94724314, 215666 पूर्ण,
	अणु  95570590, 216114 पूर्ण,
	अणु  96422343, 216561 पूर्ण,
	अणु  97279594, 217009 पूर्ण,
	अणु  98142366, 217457 पूर्ण,
	अणु  99010679, 217905 पूर्ण,
	अणु  99884556, 218353 पूर्ण,
	अणु 100764018, 218801 पूर्ण,
	अणु 101649086, 219250 पूर्ण,
	अणु 102539782, 219698 पूर्ण,
	अणु 103436128, 220147 पूर्ण,
	अणु 104338146, 220596 पूर्ण,
	अणु 105245857, 221046 पूर्ण,
	अणु 106159284, 221495 पूर्ण,
	अणु 107078448, 221945 पूर्ण,
	अणु 108003370, 222394 पूर्ण,
	अणु 108934074, 222844 पूर्ण,
	अणु 109870580, 223294 पूर्ण,
	अणु 110812910, 223745 पूर्ण,
	अणु 111761087, 224195 पूर्ण,
	अणु 112715133, 224646 पूर्ण,
	अणु 113675069, 225097 पूर्ण,
	अणु 114640918, 225548 पूर्ण,
	अणु 115612702, 225999 पूर्ण,
	अणु 116590442, 226450 पूर्ण,
	अणु 117574162, 226902 पूर्ण,
	अणु 118563882, 227353 पूर्ण,
	अणु 119559626, 227805 पूर्ण,
	अणु 120561415, 228258 पूर्ण,
	अणु 121569272, 228710 पूर्ण,
	अणु 122583219, 229162 पूर्ण,
	अणु 123603278, 229615 पूर्ण,
	अणु 124629471, 230068 पूर्ण,
	अणु 125661822, 230521 पूर्ण,
	अणु 126700352, 230974 पूर्ण,
	अणु 127745083, 231428 पूर्ण,
	अणु 128796039, 231882 पूर्ण,
	अणु 129853241, 232336 पूर्ण,
	अणु 130916713, 232790 पूर्ण,
	अणु 131986475, 233244 पूर्ण,
	अणु 133062553, 233699 पूर्ण,
	अणु 134144966, 234153 पूर्ण,
	अणु 135233739, 234608 पूर्ण,
	अणु 136328894, 235064 पूर्ण,
	अणु 137430453, 235519 पूर्ण,
	अणु 138538440, 235975 पूर्ण,
	अणु 139652876, 236430 पूर्ण,
	अणु 140773786, 236886 पूर्ण,
	अणु 141901190, 237343 पूर्ण,
	अणु 143035113, 237799 पूर्ण,
	अणु 144175576, 238256 पूर्ण,
	अणु 145322604, 238713 पूर्ण,
	अणु 146476218, 239170 पूर्ण,
	अणु 147636442, 239627 पूर्ण,
	अणु 148803298, 240085 पूर्ण,
	अणु 149976809, 240542 पूर्ण,
	अणु 151156999, 241000 पूर्ण,
	अणु 152343890, 241459 पूर्ण,
	अणु 153537506, 241917 पूर्ण,
	अणु 154737869, 242376 पूर्ण,
	अणु 155945002, 242835 पूर्ण,
	अणु 157158929, 243294 पूर्ण,
	अणु 158379673, 243753 पूर्ण,
	अणु 159607257, 244213 पूर्ण,
	अणु 160841704, 244673 पूर्ण,
	अणु 162083037, 245133 पूर्ण,
	अणु 163331279, 245593 पूर्ण,
	अणु 164586455, 246054 पूर्ण,
	अणु 165848586, 246514 पूर्ण,
	अणु 167117696, 246975 पूर्ण,
	अणु 168393810, 247437 पूर्ण,
	अणु 169676949, 247898 पूर्ण,
	अणु 170967138, 248360 पूर्ण,
	अणु 172264399, 248822 पूर्ण,
	अणु 173568757, 249284 पूर्ण,
	अणु 174880235, 249747 पूर्ण,
	अणु 176198856, 250209 पूर्ण,
	अणु 177524643, 250672 पूर्ण,
	अणु 178857621, 251136 पूर्ण,
	अणु 180197813, 251599 पूर्ण,
	अणु 181545242, 252063 पूर्ण,
	अणु 182899933, 252527 पूर्ण,
	अणु 184261908, 252991 पूर्ण,
	अणु 185631191, 253456 पूर्ण,
	अणु 187007807, 253920 पूर्ण,
	अणु 188391778, 254385 पूर्ण,
	अणु 189783129, 254851 पूर्ण,
	अणु 191181884, 255316 पूर्ण,
	अणु 192588065, 255782 पूर्ण,
	अणु 194001698, 256248 पूर्ण,
	अणु 195422805, 256714 पूर्ण,
	अणु 196851411, 257181 पूर्ण,
	अणु 198287540, 257648 पूर्ण,
	अणु 199731215, 258115 पूर्ण,
	अणु 201182461, 258582 पूर्ण,
	अणु 202641302, 259050 पूर्ण,
	अणु 204107760, 259518 पूर्ण,
	अणु 205581862, 259986 पूर्ण,
	अणु 207063630, 260454 पूर्ण,
	अणु 208553088, 260923 पूर्ण,
	अणु 210050262, 261392 पूर्ण,
	अणु 211555174, 261861 पूर्ण,
	अणु 213067849, 262331 पूर्ण,
	अणु 214588312, 262800 पूर्ण,
	अणु 216116586, 263270 पूर्ण,
	अणु 217652696, 263741 पूर्ण,
	अणु 219196666, 264211 पूर्ण,
	अणु 220748520, 264682 पूर्ण,
	अणु 222308282, 265153 पूर्ण,
	अणु 223875978, 265625 पूर्ण,
	अणु 225451630, 266097 पूर्ण,
	अणु 227035265, 266569 पूर्ण,
	अणु 228626905, 267041 पूर्ण,
	अणु 230226576, 267514 पूर्ण,
	अणु 231834302, 267986 पूर्ण,
	अणु 233450107, 268460 पूर्ण,
	अणु 235074016, 268933 पूर्ण,
	अणु 236706054, 269407 पूर्ण,
	अणु 238346244, 269881 पूर्ण,
	अणु 239994613, 270355 पूर्ण,
	अणु 241651183, 270830 पूर्ण,
	अणु 243315981, 271305 पूर्ण
पूर्ण;

/* वापस largest index i such that fval <= lookup[i][small] */
अटल अंतरभूत u32 tfrc_binsearch(u32 fval, u8 small)
अणु
	u32 try, low = 0, high = TFRC_CALC_X_ARRSIZE - 1;

	जबतक (low < high) अणु
		try = (low + high) / 2;
		अगर (fval <= tfrc_calc_x_lookup[try][small])
			high = try;
		अन्यथा
			low  = try + 1;
	पूर्ण
	वापस high;
पूर्ण

/**
 * tfrc_calc_x - Calculate the send rate as per section 3.1 of RFC3448
 * @s: packet size          in bytes
 * @R: RTT                  scaled by 1000000   (i.e., microseconds)
 * @p: loss ratio estimate  scaled by 1000000
 *
 * Returns X_calc           in bytes per second (not scaled).
 */
u32 tfrc_calc_x(u16 s, u32 R, u32 p)
अणु
	u16 index;
	u32 f;
	u64 result;

	/* check against invalid parameters and भागide-by-zero   */
	BUG_ON(p >  1000000);		/* p must not exceed 100%   */
	BUG_ON(p == 0);			/* f(0) = 0, भागide by zero */
	अगर (R == 0) अणु			/* possible  भागide by zero */
		DCCP_CRIT("WARNING: RTT is 0, returning maximum X_calc.");
		वापस ~0U;
	पूर्ण

	अगर (p <= TFRC_CALC_X_SPLIT)		अणु     /* 0.0000 < p <= 0.05   */
		अगर (p < TFRC_SMALLEST_P) अणु	      /* 0.0000 < p <  0.0001 */
			DCCP_WARN("Value of p (%d) below resolution. "
				  "Substituting %d\n", p, TFRC_SMALLEST_P);
			index = 0;
		पूर्ण अन्यथा				      /* 0.0001 <= p <= 0.05  */
			index =  p/TFRC_SMALLEST_P - 1;

		f = tfrc_calc_x_lookup[index][1];

	पूर्ण अन्यथा अणु				      /* 0.05   <  p <= 1.00  */
		index = p/(1000000/TFRC_CALC_X_ARRSIZE) - 1;

		f = tfrc_calc_x_lookup[index][0];
	पूर्ण

	/*
	 * Compute X = s/(R*f(p)) in bytes per second.
	 * Since f(p) and R are both scaled by 1000000, we need to multiply by
	 * 1000000^2. To aव्योम overflow, the result is computed in two stages.
	 * This works under almost all reasonable operational conditions, क्रम a
	 * wide range of parameters. Yet, should some strange combination of
	 * parameters result in overflow, the use of scaled_भाग32 will catch
	 * this and वापस अच_पूर्णांक_उच्च - which is a logically adequate consequence.
	 */
	result = scaled_भाग(s, R);
	वापस scaled_भाग32(result, f);
पूर्ण

/**
 *  tfrc_calc_x_reverse_lookup  -  try to find p given f(p)
 *  @fvalue: function value to match, scaled by 1000000
 *
 *  Returns बंदst match क्रम p, also scaled by 1000000
 */
u32 tfrc_calc_x_reverse_lookup(u32 fvalue)
अणु
	पूर्णांक index;

	अगर (fvalue == 0)	/* f(p) = 0  whenever  p = 0 */
		वापस 0;

	/* Error हालs. */
	अगर (fvalue < tfrc_calc_x_lookup[0][1]) अणु
		DCCP_WARN("fvalue %u smaller than resolution\n", fvalue);
		वापस TFRC_SMALLEST_P;
	पूर्ण
	अगर (fvalue > tfrc_calc_x_lookup[TFRC_CALC_X_ARRSIZE - 1][0]) अणु
		DCCP_WARN("fvalue %u exceeds bounds!\n", fvalue);
		वापस 1000000;
	पूर्ण

	अगर (fvalue <= tfrc_calc_x_lookup[TFRC_CALC_X_ARRSIZE - 1][1]) अणु
		index = tfrc_binsearch(fvalue, 1);
		वापस (index + 1) * TFRC_CALC_X_SPLIT / TFRC_CALC_X_ARRSIZE;
	पूर्ण

	/* अन्यथा ... it must be in the coarse-grained column */
	index = tfrc_binsearch(fvalue, 0);
	वापस (index + 1) * 1000000 / TFRC_CALC_X_ARRSIZE;
पूर्ण

/**
 * tfrc_invert_loss_event_rate  -  Compute p so that 10^6 corresponds to 100%
 * When @loss_event_rate is large, there is a chance that p is truncated to 0.
 * To aव्योम re-entering slow-start in that हाल, we set p = TFRC_SMALLEST_P > 0.
 */
u32 tfrc_invert_loss_event_rate(u32 loss_event_rate)
अणु
	अगर (loss_event_rate == अच_पूर्णांक_उच्च)		/* see RFC 4342, 8.5 */
		वापस 0;
	अगर (unlikely(loss_event_rate == 0))		/* map 1/0 पूर्णांकo 100% */
		वापस 1000000;
	वापस max_t(u32, scaled_भाग(1, loss_event_rate), TFRC_SMALLEST_P);
पूर्ण
